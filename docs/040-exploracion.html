<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.37">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>4&nbsp; La exploración de los datos mediante gráficos. – Introducción a la estadística industrial y la ciencia de datos utilizando Microsoft Excel y R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./050-estad-simple.html" rel="next">
<link href="./030-organizacion.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-29e2c20b02301cfff04dc8050bf30c7e.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-273e46d7b3848a679358d7b360117b95.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<link href="site_libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet">

<script src="site_libs/datatables-binding-0.33/datatables.js"></script>

<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>

<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet">

<link href="site_libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet">

<script src="site_libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>

<link href="site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>


  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./030-organizacion.html">Técnicas básicas</a></li><li class="breadcrumb-item"><a href="./040-exploracion.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">La exploración de los datos mediante gráficos.</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Buscar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Introducción a la estadística industrial y la ciencia de datos utilizando Microsoft Excel y R</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prefacio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./010-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">La estadística en el entorno industrial.</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./020-herramientas.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Herramientas para el análisis. La reproducibilidad.</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Técnicas básicas</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./030-organizacion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">La organización de los datos y el flujo de trabajo.Los datos ordenados o <em>arreglados</em> (<em>tidy data</em>)</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./040-exploracion.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">La exploración de los datos mediante gráficos.</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./050-estad-simple.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Medidas centrales y medidas de dispersión: la media y la varianza.</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./060-forma-de-los-datos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">La forma de los datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./070-distr-prob.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Probabilidad y distribuciones de probabilidad</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./080-relacion-xy.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">La relación entre las variables</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./090-anova.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">El análisis de la varianza</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./100-disexp.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Diseño de experimentos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./110-comunicacion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">La comunicación de los resultados</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Aplicaciones prácticas</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./120-control-proc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">El control estadístico de procesos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./130-sistema-medicion.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">El análisis del sistema de medición</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./140-mejora-procesos.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title"><em>Six Sigma</em> y la mejora de los procesos.</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Anexos</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./150-anexo-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Instalación de R y conceptos básicos</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./160-bibliografia.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bibliografía</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#explorando-los-datos-con-excel-y-r." id="toc-explorando-los-datos-con-excel-y-r." class="nav-link active" data-scroll-target="#explorando-los-datos-con-excel-y-r."><span class="header-section-number">4.1</span> Explorando los datos con Excel y R.</a></li>
  <li><a href="#el-diagrama-de-tallo-y-hojas-stem-and-leaf-plot-o-stemplot" id="toc-el-diagrama-de-tallo-y-hojas-stem-and-leaf-plot-o-stemplot" class="nav-link" data-scroll-target="#el-diagrama-de-tallo-y-hojas-stem-and-leaf-plot-o-stemplot"><span class="header-section-number">4.2</span> El diagrama de tallo y hojas (<em>stem and leaf plot</em> o <em>stemplot</em>)</a>
  <ul class="collapse">
  <li><a href="#construcción-del-diagrama" id="toc-construcción-del-diagrama" class="nav-link" data-scroll-target="#construcción-del-diagrama">Construcción del diagrama</a></li>
  <li><a href="#interpretación-del-diagrama-de-tallo-y-hojas" id="toc-interpretación-del-diagrama-de-tallo-y-hojas" class="nav-link" data-scroll-target="#interpretación-del-diagrama-de-tallo-y-hojas">Interpretación del diagrama de tallo y hojas</a></li>
  <li><a href="#resumen" id="toc-resumen" class="nav-link" data-scroll-target="#resumen">Resumen</a></li>
  </ul></li>
  <li><a href="#distribuciones-de-frecuencias" id="toc-distribuciones-de-frecuencias" class="nav-link" data-scroll-target="#distribuciones-de-frecuencias"><span class="header-section-number">4.3</span> Distribuciones de frecuencias</a>
  <ul class="collapse">
  <li><a href="#construcción-en-excel-y-en-r" id="toc-construcción-en-excel-y-en-r" class="nav-link" data-scroll-target="#construcción-en-excel-y-en-r">Construcción en Excel y en R</a></li>
  </ul></li>
  <li><a href="#diagrama-de-barras" id="toc-diagrama-de-barras" class="nav-link" data-scroll-target="#diagrama-de-barras"><span class="header-section-number">4.4</span> Diagrama de barras</a></li>
  <li><a href="#histograma" id="toc-histograma" class="nav-link" data-scroll-target="#histograma"><span class="header-section-number">4.5</span> Histograma</a>
  <ul class="collapse">
  <li><a href="#construcción-de-un-histograma-en-excel" id="toc-construcción-de-un-histograma-en-excel" class="nav-link" data-scroll-target="#construcción-de-un-histograma-en-excel">Construcción de un histograma en Excel</a></li>
  <li><a href="#análisis-de-un-caso-real" id="toc-análisis-de-un-caso-real" class="nav-link" data-scroll-target="#análisis-de-un-caso-real">Análisis de un caso real</a></li>
  <li><a href="#otros-ejemplos" id="toc-otros-ejemplos" class="nav-link" data-scroll-target="#otros-ejemplos">Otros ejemplos</a></li>
  </ul></li>
  <li><a href="#gráficos-de-densidad" id="toc-gráficos-de-densidad" class="nav-link" data-scroll-target="#gráficos-de-densidad"><span class="header-section-number">4.6</span> Gráficos de densidad</a></li>
  <li><a href="#diagrama-de-caja-o-boxplot" id="toc-diagrama-de-caja-o-boxplot" class="nav-link" data-scroll-target="#diagrama-de-caja-o-boxplot"><span class="header-section-number">4.7</span> Diagrama de caja o <em>boxplot</em></a>
  <ul class="collapse">
  <li><a href="#relación-entre-el-boxplot-y-el-histograma" id="toc-relación-entre-el-boxplot-y-el-histograma" class="nav-link" data-scroll-target="#relación-entre-el-boxplot-y-el-histograma">Relación entre el <em>boxplot</em> y el histograma</a></li>
  </ul></li>
  <li><a href="#gráficos-de-dispersión" id="toc-gráficos-de-dispersión" class="nav-link" data-scroll-target="#gráficos-de-dispersión"><span class="header-section-number">4.8</span> Gráficos de dispersión</a></li>
  <li><a href="#gráficos-de-series-temporales" id="toc-gráficos-de-series-temporales" class="nav-link" data-scroll-target="#gráficos-de-series-temporales"><span class="header-section-number">4.9</span> Gráficos de series temporales</a>
  <ul class="collapse">
  <li><a href="#cómo-hacer-los-gráficos-de-series-temporales-en-excel-y-en-r" id="toc-cómo-hacer-los-gráficos-de-series-temporales-en-excel-y-en-r" class="nav-link" data-scroll-target="#cómo-hacer-los-gráficos-de-series-temporales-en-excel-y-en-r">Cómo hacer los gráficos de series temporales en Excel y en R</a></li>
  <li><a href="#resumen-1" id="toc-resumen-1" class="nav-link" data-scroll-target="#resumen-1">Resumen</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./030-organizacion.html">Técnicas básicas</a></li><li class="breadcrumb-item"><a href="./040-exploracion.html"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">La exploración de los datos mediante gráficos.</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">La exploración de los datos mediante gráficos.</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>En este capítulo esyudiaremos cómo describir conjuntos de datos de forma visual, utilizando varios tipos de gráficos distintos:</p>
<ul>
<li><em>Stemplot</em></li>
<li>Histograma</li>
<li>Diagrama de caja o <em>boxplot</em></li>
<li>Gráfico de dispersión</li>
<li>Gráfico de series temporales</li>
</ul>
<p>Veremos la relación visual entre un histograma y un diagrama de caja, y aprenderemos también a construir tablas de frecuencias en Excel y en R. Finalmente, veremos algunos otros tipos de gráficos que son útiles para aplicaciones concretas, como los gráficos de densidad.</p>
<p>Utilizaremos dos tablas de datos,</p>
<ul>
<li>las alturas de un grupo de alumnos y alumnas, recogidos en un fichero CSV denominado <code>aula1.csv</code>,</li>
<li>los datos analíticos de una fabricación de camembert a lo largo de un año, recogidos en un fichero CSV denominado <code>camembert.csv</code></li>
</ul>
<section id="explorando-los-datos-con-excel-y-r." class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="explorando-los-datos-con-excel-y-r."><span class="header-section-number">4.1</span> Explorando los datos con Excel y R.</h2>
<p>Supongamos que queremos medir la altura de un grupo de alumnos de nuestra clase. Éste es nuestro grupo:</p>
<p><img src="01-imagenes/grupo1.jpg" class="img-fluid"></p>
<p>Realizamos la medida de altura de cada persona y registramos los valores en una hoja de cálculo, siguiendo las buenas prácticas que hemos visto al estudiar los <em>datos ordenados</em>.</p>
<p><img src="01-imagenes/aula1.png" class="img-fluid"></p>
<p>Guardamos esta tabla en el archivo CSV <code>aula1.csv</code>, y lo importamos a un dataframe de R para su uso a lo largo del capítulo.</p>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explicación del código R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Cargar la librería <code>tidyverse</code></strong>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>library(tidyverse)</code></strong>: Carga el paquete <code>tidyverse</code>, que es una colección de paquetes de R diseñados para el análisis de datos. Incluye paquetes como <code>ggplot2</code> para la visualización de datos, <code>dplyr</code> para la manipulación de datos, <code>tidyr</code> para la organización de datos, entre otros.</li>
</ul></li>
<li><p><strong>Leer el archivo CSV</strong>:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>df_aula <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"excel-R/aula1.csv"</span>, <span class="at">fileEncoding =</span> <span class="st">'latin1'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>df_aula &lt;- read.csv2("excel-R/aula1.csv", fileEncoding = 'latin1')</code></strong>: Lee el archivo CSV denominado <code>aula1.csv</code> que se encuentra en la carpeta <code>excel-R</code> y lo almacena en el dataframe <code>df_aula</code>. La función <code>read.csv2</code> se utiliza para leer archivos CSV donde el separador de campo es un punto y coma (<code>;</code>) y <code>fileEncoding = 'latin1'</code> asegura que los caracteres especiales se manejen correctamente durante la lectura del archivo.</li>
</ul></li>
<li><p><strong>Mostrar el contenido del dataframe <code>df_aula</code></strong>:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_aula)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>head(df_aula)</code></strong>: Muestra las primeras líneas del contenido del dataframe <code>df_aula</code>, para que puedas visualizar los datos que has cargado.. Si simplemente escribimos el nombre del dataframe en la consola, sin usar la función <code>head()</code>, R imprimirá todo el dataframe.</li>
</ul></li>
</ol>
<p><strong>Resumen</strong></p>
<p>Este código:</p>
<ul>
<li>Carga la colección de paquetes <code>tidyverse</code> para facilitar el análisis y manipulación de datos.</li>
<li>Lee un archivo CSV y lo almacena en un <em>dataframe</em>.</li>
<li>Muestra el contenido del dataframe para que puedas ver los datos que se han cargado.</li>
</ul>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>df_aula <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"excel-R/aula1.csv"</span>,<span class="at">fileEncoding=</span><span class="st">'latin1'</span>)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(df_aula)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   nombre altura_cm
1    Luis       153
2     Ana       135
3    Iván       140
4   Lucía       140
5 Jessica       175
6 Antonio       138</code></pre>
</div>
</div>
</section>
<section id="el-diagrama-de-tallo-y-hojas-stem-and-leaf-plot-o-stemplot" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="el-diagrama-de-tallo-y-hojas-stem-and-leaf-plot-o-stemplot"><span class="header-section-number">4.2</span> El diagrama de tallo y hojas (<em>stem and leaf plot</em> o <em>stemplot</em>)</h2>
<p>El diagrama de tallo y hojas, también conocido como <em>stemplot</em>, es una herramienta gráfica utilizada en estadística para representar la distribución de un conjunto de datos. Es especialmente útil para conjuntos de datos pequeños y proporciona una forma rápida y efectiva de visualizar la forma de los datos y su dispersión. El <em>stemplot</em> recibe este nombre porque el dibujo que resulta se asemeja a un tallo el que le salen las hojas que son los datos individuales.</p>
<p>Los componentes de un <em>stemplot</em> son:</p>
<ul>
<li><p><strong>Tallo</strong>: Representa el grupo principal de los valores de los datos. Generalmente, se usa la parte más significativa del número. Por ejemplo, en el número 43, el tallo podría ser 4.</p></li>
<li><p><strong>Hojas</strong>: Representan los dígitos finales o menos significativos de los valores de los datos. Siguiendo el ejemplo anterior, la hoja sería 3.</p></li>
</ul>
<section id="construcción-del-diagrama" class="level3">
<h3 class="anchored" data-anchor-id="construcción-del-diagrama">Construcción del diagrama</h3>
<p>Vamos a utilizar los datos de medidas de altura de nuestro grupo de alumnos. Quitamos el último dígito a la derecha de nuestros valores y colocamos verticalmente los valores resultantes ordenándolos de menor a mayor, y evitando las repeticiones. Para evitar errores en la escala, debemos incluir los valores intermedios aunque no haya ninguno en nuestros datos (en el ejemplo, el valor 16 que correspondería a los 160). Esto forma el “tallo” de nuestro diagrama:</p>
<p><img src="01-imagenes/aula1-stemplot-paso1.png" class="img-fluid"></p>
<p>A continuación añadimos las hojas en la celda a la derecha, que consisten en los valores que hemos “cortado” de nuestro árbol, uno al lado de otro, incluyendo esta vez los valores repetidos, en orden de menor a mayor. Por ejemplo, para el valor 135, descartamos 13 y utlizamos 5; para el valor 138, descartamos 13 y utilizamos 8, y así sucesivamente para todos los valores.</p>
<p><img src="01-imagenes/aula1-stemplot-paso2.png" class="img-fluid"></p>
<p>R permite realizar el <em>stemplot</em> mediante la función <span class="math inline">\(stem()\)</span> de forma automática:</p>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explicación del código R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><strong><code>df_aula$altura_cm</code></strong>:
<ul>
<li><strong><code>df_aula</code></strong>: Este es el nombre del dataframe que contiene tus datos.</li>
<li><strong><code>$altura_cm</code></strong>: Este símbolo <code>$</code> se utiliza para acceder a la columna <code>altura_cm</code> dentro del dataframe <code>df_aula</code>. Así que <code>df_aula$altura_cm</code> se refiere a los datos de la columna <code>altura_cm</code>.</li>
</ul></li>
<li><strong><code>stem(...)</code></strong>:
<ul>
<li>La función <code>stem()</code> en R genera un diagrama de tallo y hojas para los datos proporcionados. Este gráfico muestra la distribución de los datos de una manera similar a un histograma, pero utilizando valores numéricos en lugar de barras.</li>
</ul></li>
</ol>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">stem</span>(df_aula<span class="sc">$</span>altura_cm)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  The decimal point is 1 digit(s) to the right of the |

  13 | 58
  14 | 005
  15 | 23449
  16 | 
  17 | 5</code></pre>
</div>
</div>
</section>
<section id="interpretación-del-diagrama-de-tallo-y-hojas" class="level3">
<h3 class="anchored" data-anchor-id="interpretación-del-diagrama-de-tallo-y-hojas">Interpretación del diagrama de tallo y hojas</h3>
<ul>
<li><strong>Tallo</strong>: Los números a la izquierda del símbolo <code>|</code> representan los valores base (o tallos), en este caso, las decenas de las alturas.</li>
<li><strong>Hojas</strong>: Los números a la derecha del símbolo <code>|</code> representan los dígitos adicionales (o hojas). Por ejemplo, en la línea <code>13 | 58</code>, el tallo es <code>13</code> (130), y las hojas son <code>5</code> y <code>8</code>, que corresponden a los datos <code>135</code> y <code>138</code>.</li>
</ul>
<p>El diagrama nos dice que los valores en torno a 150 cm son los más frecuentes, y que hay un valor alto (175) que se separa un poco del resto.</p>
</section>
<section id="resumen" class="level3">
<h3 class="anchored" data-anchor-id="resumen">Resumen</h3>
<p>El <em>stemplot</em> es muy sencillo de hacer y nos da una visión rápida y compacta de la <em>distribución</em> de nuestros valores, así como de la posible existencia de valores que se separan del conjunto. Estos valores alejados, que se conocen en inglés como <em>outliers</em>, tienen mucha importancia en el analisis e interpretación de los datos, como veremos más adelante.</p>
<p>La ventaja principal del <em>stemplot</em> es que mantiene los valores originales de las observaciones, y puede hacerse fácilmente con bolígrafo y papel, sin necesidad de más herramientas.</p>
</section>
</section>
<section id="distribuciones-de-frecuencias" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="distribuciones-de-frecuencias"><span class="header-section-number">4.3</span> Distribuciones de frecuencias</h2>
<p>Una <strong>distribución de frecuencias</strong> es una tabla que muestra la frecuencia con la que ocurren los valores diferentes en un conjunto de datos. Esta herramienta es fundamental en la estadística descriptiva y permite resumir y visualizar cómo se distribuyen los datos de manera clara y comprensible. A partir de una tabla de frecuencias se pueden construir diagramas de barra o histogramas para visualizar la tabla de forma gráfica.</p>
<p>Para construir una distribución de frecuencias, agrupamos nuestros valores por intervalos, y contamos el número de observaciones que aparecen en cada intervalo. Los componentes de una distribución de frecuencias son:</p>
<ul>
<li>las <strong>categorías o clases</strong> son los intervalos o valores específicos de los datos que se están analizando. Cada categoría representa un rango de valores en caso de datos continuos, o valores específicos en caso de datos discretos.</li>
<li>la <strong>frecuencia absoluta</strong> es un <em>recuento simple</em> de cuántas veces aparece cada valor en un conjunto de datos.</li>
<li>la <strong>frecuencia relativa</strong> nos muestra la <em>proporción</em> de cada valor frente al total. Puede expresarse como fracción (entre 0 y 1) o como porcentaje (respecto a 100), y se calcula como: <span class="math display">\[
\text{Frecuencia Relativa} = \frac{\text{Frecuencia Absoluta}}{\text{Número Total de Observaciones}}
\]</span></li>
<li>la <strong>frecuencia acumulada</strong> nos dice cuántas observaciones están por debajo de un cierto valor.</li>
<li>la <strong>frecuencia relativa acumulada</strong> es la proporción de valores que están por debajo de un cierto valor</li>
</ul>
<section id="construcción-en-excel-y-en-r" class="level3">
<h3 class="anchored" data-anchor-id="construcción-en-excel-y-en-r">Construcción en Excel y en R</h3>
<p>La tabla a continuación muestra una distribución de frecuencias de las alturas de nuestro grupo de alumnos, calculada mediante una tabla dinámica de Excel.</p>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Instrucciones paso a paso en Excel
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Para crear una tabla de frecuencias de la variable <code>altura_cm</code> mediante tablas dinámicas en Excel, sigue estos pasos:</p>
<p><strong>1. Selecciona los Datos</strong></p>
<ol type="1">
<li>Abre tu archivo de Excel y selecciona toda la tabla que incluye los encabezados (<code>nombre</code> y <code>altura_cm</code>).</li>
</ol>
<p><strong>2. Inserta una tabla dinámica</strong></p>
<ol type="1">
<li>Ve a la pestaña <strong>Insertar</strong> en la barra de herramientas de Excel.</li>
<li>Haz clic en <strong>Tabla Dinámica</strong>.</li>
<li>En el cuadro de diálogo que aparece, asegúrate de que el rango de datos seleccionado es correcto y elige dónde deseas colocar la tabla dinámica (en una nueva hoja de cálculo o en la hoja actual).</li>
</ol>
<p><strong>3. Añade la frecuencia absoluta</strong></p>
<ol type="1">
<li>En el panel de campos de la tabla dinámica, arrastra el campo <code>altura_cm</code> a la sección <strong>Filas</strong>.</li>
<li>Arrastra nuevamente el campo <code>altura_cm</code> a la sección <strong>Valores</strong>.</li>
</ol>
<p><strong>4. Ajusta la configuración de valores</strong></p>
<ol type="1">
<li>Haz clic en el campo <code>altura_cm</code> en la sección <strong>Valores</strong>.</li>
<li>Selecciona <strong>Configuración de campo de valor</strong>.</li>
<li>En el cuadro de diálogo que aparece, asegúrate de que esté seleccionada la opción <strong>Recuento</strong></li>
<li>Acepta todo hasta volver a Excel.</li>
</ol>
<p><strong>5. Añade la frecuencia relativa</strong></p>
<ol type="1">
<li>En el panel de campos de la tabla dinámica, arrastra de nuevo el campo <code>altura_cm</code> a la sección <strong>Valores</strong>. Ahora la variable aparecerá como <code>altura_cm2</code>.</li>
</ol>
<p><strong>6. Ajusta de nuevo la configuración de valores</strong></p>
<ol type="1">
<li>Haz clic en el campo <code>altura_cm2</code> en la sección <strong>Valores</strong>.</li>
<li>Selecciona <strong>Configuración de campo de valor</strong>.</li>
<li>En el cuadro de diálogo que aparece, asegúrate de que esté seleccionada la opción <strong>Recuento</strong>.</li>
<li>En ese mismo cuadro, haz click en el botón <strong>Formato de número</strong>, selecciona <strong>Número</strong> y <strong>2 decimales</strong>, y acepta.</li>
<li>En ese mismo cuadro, selecciona la pestaña que dice <strong>Mostrar valores como</strong></li>
<li>En el menú desplegable, escoge la opción <strong>% del total de columnas</strong>.</li>
<li>Acepta todo hasta volver a Excel.</li>
</ol>
<p><strong>7. Ordena y formatea</strong></p>
<ol type="1">
<li>Puedes ordenar las alturas en orden ascendente o descendente haciendo clic en la flecha junto a <code>altura_cm</code> en la tabla dinámica.</li>
<li>También puedes cambiar el formato de la tabla dinámica para que sea más fácil de leer.</li>
<li>Puedes renombrar los encabezados de la tabla para que sea más fácil de leer, rotulando las columnas, por ejemplo, como <code>frec_abs</code>y <code>frec_rel</code>, o cualquier otro encabezado que te resulte claro y útil.</li>
</ol>
</div>
</div>
</div>
<p><img src="01-imagenes/aula1-td-frec.png" class="img-fluid"></p>
<p>También podemos calcular las frecuencias absolutas y relativas de nuestra tabla en R. La formulación en R requiere una buena comprensión de las funciones de la libreria <em>tidyverse</em> utilizadas en la preparación de la tabla.</p>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explicación del código R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Cargar la librería <code>tidyverse</code></strong>:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>library(tidyverse)</code></strong>: Carga el paquete <code>tidyverse</code>, que es una colección de paquetes de R diseñados para el análisis de datos, como <code>ggplot2</code>, <code>dplyr</code>, <code>tidyr</code>, entre otros.</li>
</ul></li>
<li><p><strong>Leer el archivo CSV</strong>:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>df_aula1 <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"excel-R/aula1.csv"</span>, <span class="at">fileEncoding =</span> <span class="st">'latin1'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>df_aula1 &lt;- read.csv2("excel-R/aula1.csv", fileEncoding = 'latin1')</code></strong>: Lee el archivo CSV denominado <code>aula1.csv</code> y lo almacena en el dataframe <code>df_aula1</code>. La opción <code>fileEncoding = 'latin1'</code> asegura que los caracteres especiales se manejen correctamente durante la lectura del archivo.</li>
</ul></li>
<li><p><strong>Crear y agrupar por intervalos</strong>:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>df_aula1 <span class="sc">|&gt;</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">intervalo =</span> <span class="fu">cut</span>(altura_cm, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">130</span>, <span class="dv">180</span>, <span class="at">by =</span> <span class="dv">10</span>), <span class="at">include.lowest =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(intervalo)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>df_aula1 |&gt;</code></strong>: Utiliza el operador pipe (<code>|&gt;</code>) para encadenar una serie de operaciones en el dataframe <code>df_aula1</code>.</li>
<li><strong><code>mutate(intervalo = cut(altura_cm, breaks = seq(130, 180, by = 10), include.lowest = TRUE))</code></strong>: Crea una nueva columna <code>intervalo</code> que contiene intervalos de la columna <code>altura_cm</code> con un rango desde 130 hasta 180 cm, con una amplitud de clase de 10 cm. La opción <code>include.lowest = TRUE</code> asegura que el valor más bajo esté incluido en el primer intervalo.</li>
<li><strong><code>group_by(intervalo)</code></strong>: Agrupa los datos por los intervalos definidos en la columna <code>intervalo</code>.</li>
</ul></li>
<li><p><strong>Completar los intervalos faltantes</strong></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">complete</span>(intervalo, <span class="at">fill =</span> <span class="fu">list</span>(<span class="at">frec_abs =</span> <span class="dv">0</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Usa la función <code>complete()</code> para asegurarse de que todos los intervalos aparezcan en la tabla, incluso si su frecuencia es cero.</li>
<li>El argumento <code>fill = list(frec_abs = 0)</code> asegura que los intervalos faltantes tengan una frecuencia absoluta de cero.</li>
</ul></li>
<li><p><strong>Calcular la frecuencia absoluta</strong>:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(<span class="at">frec_abs =</span> <span class="fu">n</span>())</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>summarise(frec_abs = n())</code></strong>: Crea un nuevo dataframe resumido que contiene la frecuencia absoluta (<code>frec_abs</code>) de cada intervalo. La función <code>n()</code> cuenta el número de observaciones en cada intervalo.</li>
</ul></li>
<li><p><strong>Calcular la frecuencia relativa</strong>:</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">frec_rel =</span> frec_abs <span class="sc">/</span> <span class="fu">sum</span>(frec_abs))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>mutate(frec_rel = frec_abs / sum(frec_abs))</code></strong>: Añade una nueva columna <code>frec_rel</code> al dataframe que contiene la frecuencia relativa. Esto se calcula dividiendo la frecuencia absoluta de cada intervalo por la suma total de todas las frecuencias absolutas.</li>
</ul></li>
</ol>
<p>El resultado es un dataframe que muestra los intervalos de <code>altura_cm</code> (columna <code>intervalo</code>), junto con las frecuencias absolutas (<code>frec_abs</code>) y las frecuencias relativas (<code>frec_rel</code>) para cada intervalo. Este proceso facilita el análisis de la distribución de los datos en intervalos específicos.</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span> (tidyverse)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>df_aula1 <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"excel-R/aula1.csv"</span>,<span class="at">fileEncoding=</span><span class="st">'latin1'</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>df_aula1 <span class="sc">|&gt;</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">intervalo =</span> <span class="fu">cut</span>(altura_cm, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">130</span>, <span class="dv">180</span>, <span class="at">by =</span> <span class="dv">10</span>), <span class="at">include_lowest =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(intervalo) <span class="sc">|&gt;</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span> (<span class="at">frec_abs =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(intervalo, <span class="at">fill =</span> <span class="fu">list</span>(<span class="at">frec_abs =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">frec_rel =</span> frec_abs <span class="sc">/</span> <span class="fu">sum</span>(frec_abs))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 3
  intervalo frec_abs frec_rel
  &lt;fct&gt;        &lt;int&gt;    &lt;dbl&gt;
1 (130,140]        4   0.364 
2 (140,150]        1   0.0909
3 (150,160]        5   0.455 
4 (160,170]        0   0     
5 (170,180]        1   0.0909</code></pre>
</div>
</div>
<div class="content-visible callout callout-style-default callout-important callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Importante: uso de los símbolos para designar los intervalos
</div>
</div>
<div class="callout-body-container callout-body">
<p>R utiliza los símbolos <code>(</code> y <code>[</code> para definir los intervalos, tal como se hace en matemáticas.</p>
<ul>
<li>Intervalo <strong>abierto</strong>: El símbolo <code>(</code> se utiliza para denotar un intervalo abierto. El límite correspondiente <strong>no</strong> está incluuido en el intervalo.</li>
<li>Intervalo <strong>cerrado o semiabierto</strong>:El símbolo <code>[</code> se utiliza para denotar un intervalo cerrado o semiabierto. EL límite correspondiente <strong>sí</strong> está incluido en el intervalo.</li>
</ul>
<p>Ejemplos:</p>
<ul>
<li><span class="math inline">\((a, b)\)</span> representa todos los números reales <strong>mayores</strong> que <span class="math inline">\(a\)</span> y <strong>menores</strong> que <span class="math inline">\(b\)</span> (excluye los valores <span class="math inline">\(a\)</span> y <span class="math inline">\(b\)</span>).</li>
<li><span class="math inline">\([a, b]\)</span> representa todos los números reales <strong>mayores o iguales</strong> que <span class="math inline">\(a\)</span> y <strong>menores o iguales</strong> que <span class="math inline">\(b\)</span> (incluye <span class="math inline">\(a\)</span> y <span class="math inline">\(b\)</span>).</li>
<li><span class="math inline">\([a, b)\)</span> representa todos los números reales <strong>mayores o iguales</strong> que <span class="math inline">\(a\)</span> y <strong>menores</strong> que <span class="math inline">\(b\)</span> (incluye <span class="math inline">\(a\)</span>, pero excluye <span class="math inline">\(b\)</span>)</li>
<li><span class="math inline">\((a, b]\)</span> representa todos los números reales <strong>mayores</strong> que <span class="math inline">\(a\)</span> y <strong>menores o iguales</strong> que <span class="math inline">\(b\)</span> (excluye <span class="math inline">\(a\)</span>, pero incluye <span class="math inline">\(b\)</span>).</li>
</ul>
</div>
</div>
<p>Si comparamos los dos métodos que hemos utilizado para construir la tabla de frecuencias, vemos que:</p>
<ul>
<li>en Excel los pasos que hemos dado no están registrados y a la vista, y, por lo tanto, no son fácilmente revisables</li>
<li>en R, todos los pasos y opciones que hemos utilizado están a la vista en el código del script</li>
</ul>
<p>Si otra persona quisiera modificar la tabla, le sería fácil editar el código R y relanzar el script, mientras que en Excel no sería fácil asegurarse de todos y cada uno de los pasos y clicks de ratón que hemos dado para construir y formatear la tabla.</p>
<p>Es el caso, por ejemplo, de que enviásemos la tabla a otra persona y ésta tuviese que editarla en nuestra ausencia. En Excel, tendríamos que enviar a esa persona una explicación con las instrucciones oportunas; en cambio, en R, una vez que se comprende el código, no hacen falta más explicaciones adicionales. Incluso sin una comprensión total del código, se podría duplicar exactamente la tabla copiando y ejecutando el código.</p>
<p>Esta es una de las principales razones de la conveniencia del aprendizaje de R incluso para las actividades más sencillas.</p>
<div class="content-visible callout callout-style-default callout-note no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Ejercicio propuesto
</div>
</div>
<div class="callout-body-container callout-body">
<p>En la tabla de frecuencias anterior, calcular <strong>frecuencia absoluta acumulada</strong> y <strong>frecuencia relativa acumulada</strong> en Excel y en R, e incluirlas en la tabla como dos columnas adicionales.</p>
</div>
</div>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Respuesta al ejercicio propuesto (en R)
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Para añadir las columnas de frecuencias absolutas acumuladas (<code>frec_abs_acum</code>) y frecuencias relativas acumuladas (<code>frec_rel_acum</code>) a tu dataframe <code>df_aula1</code>, puedes usar las funciones <code>cumsum()</code> y algunas mutaciones adicionales. Aquí tienes el código actualizado:</p>
<p><strong>Código R actualizado</strong></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Cargar las librerías necesarias</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="do">## Crear el dataframe con las nuevas columnas de frecuencias acumuladas</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>df_aula1 <span class="sc">|&gt;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">intervalo =</span> <span class="fu">cut</span>(altura_cm, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">130</span>, <span class="dv">180</span>, <span class="at">by =</span> <span class="dv">10</span>), <span class="at">include_lowest =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(intervalo) <span class="sc">|&gt;</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">frec_abs =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(intervalo, <span class="at">fill =</span> <span class="fu">list</span>(<span class="at">frec_abs =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">frec_rel =</span> frec_abs <span class="sc">/</span> <span class="fu">sum</span>(frec_abs),</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">frec_abs_acum =</span> <span class="fu">cumsum</span>(frec_abs),</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">frec_rel_acum =</span> <span class="fu">cumsum</span>(frec_rel)) <span class="sc">|&gt;</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>Detalle del código</strong></p>
<ol type="1">
<li><p><strong>Crear intervalos</strong>:</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">intervalo =</span> <span class="fu">cut</span>(altura_cm, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">130</span>, <span class="dv">180</span>, <span class="at">by =</span> <span class="dv">10</span>), <span class="at">include_lowest =</span> <span class="cn">TRUE</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Agrupa los valores de <code>altura_cm</code> en intervalos definidos por <code>seq(130, 180, by = 10)</code>.</li>
</ul></li>
<li><p><strong>Agrupar por intervalo y calcular frecuencia absoluta</strong>:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(intervalo) <span class="sc">|&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(<span class="at">frec_abs =</span> <span class="fu">n</span>())</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Agrupa por <code>intervalo</code> y calcula la frecuencia absoluta (<code>frec_abs</code>) de cada intervalo.</li>
</ul></li>
<li><p><strong>Calcular frecuencia relativa</strong>:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">frec_rel =</span> frec_abs <span class="sc">/</span> <span class="fu">sum</span>(frec_abs))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Calcula la frecuencia relativa (<code>frec_rel</code>) dividiendo la frecuencia absoluta de cada intervalo por la suma total de frecuencias absolutas.</li>
</ul></li>
<li><p><strong>Completar los intervalos faltantes</strong>:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a> <span class="fu">complete</span>(intervalo, <span class="at">fill =</span> <span class="fu">list</span>(<span class="at">frec_abs =</span> <span class="dv">0</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><p>Usa la función <code>complete()</code> para asegurarse de que todos los intervalos aparezcan en la tabla, incluso si su frecuencia es cero.</p></li>
<li><p>El argumento <code>fill = list(frec_abs = 0)</code> asegura que los intervalos faltantes tengan una frecuencia absoluta de cero.</p></li>
</ul></li>
<li><p><strong>Calcular frecuencia absoluta acumulada</strong>:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">frec_abs_acum =</span> <span class="fu">cumsum</span>(frec_abs))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Usa <code>cumsum()</code> para calcular la frecuencia absoluta acumulada (<code>frec_abs_acum</code>).</li>
</ul></li>
<li><p><strong>Calcular frecuencia relativa acumulada</strong>:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">frec_rel_acum =</span> <span class="fu">cumsum</span>(frec_rel))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Usa <code>cumsum()</code> para calcular la frecuencia relativa acumulada (<code>frec_rel_acum</code>).</li>
</ul></li>
</ol>
<p><strong>Resultado:</strong></p>
<p>El dataframe resultante tendrá las siguientes columnas:</p>
<ul>
<li><code>intervalo</code>: Intervalos definidos de <code>altura_cm</code>.</li>
<li><code>frec_abs</code>: Frecuencia absoluta de cada intervalo.</li>
<li><code>frec_rel</code>: Frecuencia relativa de cada intervalo.</li>
<li><code>frec_abs_acum</code>: Frecuencia absoluta acumulada.</li>
<li><code>frec_rel_acum</code>: Frecuencia relativa acumulada.</li>
</ul>
</div>
</div>
</div>
<p>Las distribuciones de frecuencias se pueden visualizar mediante varios tipos de gráficos, como histogramas, gráficos de barras y polígonos de frecuencias.</p>
</section>
</section>
<section id="diagrama-de-barras" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="diagrama-de-barras"><span class="header-section-number">4.4</span> Diagrama de barras</h2>
<p>Cuando nuestra variable es <em>discreta</em>, podemos representar las frecuencias de cada valor de forma gráfica utilizando un diagrama de barras. Este diagrama utiliza barras rectangulares para representar la frecuencia de cada categoría.</p>
<p>Este gráfico es muy utilizado para representar, por ejemplo, resultados de encuestas, como el número de votos que han obtenido los diferentes partidos políticos en unas elecciones, o tablas discretas, como los kilos fabricados por meses en una fábrica.</p>
<div>

</div>
<div class="quarto-layout-panel" data-layout="[[40,-20,40],[45,-10,45]]">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 40.0%;justify-content: center;">
<p><img src="01-imagenes/2024-12-07-excel-tabla-frec-1.png" class="img-fluid"></p>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 20.0%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 40.0%;justify-content: center;">
<p><img src="01-imagenes/2024-12-07-excel-tabla-frec-2.png" class="img-fluid"></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 45.0%;justify-content: center;">
<p><img src="01-imagenes/barras1.png" class="img-fluid"></p>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 10.0%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 45.0%;justify-content: center;">
<p><img src="01-imagenes/barras2.png" class="img-fluid"></p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 45.0%;justify-content: flex-start;">
<p>Ejemplos de diagramas de barras</p>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 10.0%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
</div>
</div>
</section>
<section id="histograma" class="level2" data-number="4.5">
<h2 data-number="4.5" class="anchored" data-anchor-id="histograma"><span class="header-section-number">4.5</span> Histograma</h2>
<p>Para visualizar las variables continuas se utiliza el <strong>histograma</strong>, que es un diagrama que utiliza las barras rectangulares para hacer un gráfico de la distribución de valores continuos, previamente agrupados en intervalos (<em>bins</em> en inglés), tal como se ha hecho en la tabla de frecuencias.</p>
<section id="componentes-de-un-histograma" class="level4">
<h4 class="anchored" data-anchor-id="componentes-de-un-histograma">Componentes de un histograma</h4>
<ol type="1">
<li><strong>Eje horizontal (X)</strong>: Representa los intervalos de valores de la variable. Cada intervalo abarca un rango específico de valores.</li>
<li><strong>Eje vertical (Y)</strong>: Muestra la frecuencia o el número de veces que los valores caen dentro de cada intervalo.</li>
<li><strong>Barras</strong>: Cada barra en el histograma representa un intervalo. La altura de la barra indica la frecuencia de los valores dentro de ese intervalo.</li>
</ol>
</section>
<section id="cómo-interpretar-un-histograma" class="level4">
<h4 class="anchored" data-anchor-id="cómo-interpretar-un-histograma">Cómo interpretar un histograma</h4>
<ul>
<li>Si las barras son altas en un intervalo específico, significa que muchos valores del conjunto de datos caen dentro de ese rango.</li>
<li>Un histograma puede ayudar a identificar patrones, como si los datos están distribuidos de manera simétrica, sesgada, o si hay picos y valles significativos.</li>
</ul>
</section>
<section id="construcción-de-un-histograma-en-excel" class="level3">
<h3 class="anchored" data-anchor-id="construcción-de-un-histograma-en-excel">Construcción de un histograma en Excel</h3>
<p>Usaremos el ejemplo de la altura en cm. de un grupo de alumnos, cuyos datos hemos guardado en el fichero csv <code>aula1.csv</code>.</p>
<p>Podemos utilizar dos métodos para hacer un histograma en Excel</p>
<section id="método-1-histograma-directo" class="level4">
<h4 class="anchored" data-anchor-id="método-1-histograma-directo">Método 1: histograma directo</h4>
<ul>
<li>Seleccionamos el rango de datos. Podemos hacerlo mediante un click en el encabezado de la columna de la variable <code>altura_cm</code>, en este caso, la columna <code>B</code>.</li>
<li>En la opción de menú <code>Insertar</code>, seleccionamos el icono <code>Seleccionar gráficos de estadística</code></li>
<li>Seleccionamos <code>Histograma</code></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01-imagenes/excel-histo-aula1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></p>
</figure>
</div>
<p>Excel calcula automáticamente la amplitud de los intervalos y el número de columnas; estas opciones pueden modificarse seleccionando con el botón derecho del ratón el elemento a modificar. En este caso, utilizamos estas opciones:</p>
<ul>
<li>Eliminamos título del gráfico</li>
<li>Modificamos anchura de las barras seleccionando <code>Dar formato a serie de datos</code>, <code>Opciones de serie</code>, <code>Ancho del rango</code>= 50%</li>
<li>Modificamos los intervalos seleccionando el eje X: <code>Dar formato al eje</code>, <code>Opciones de eje</code>, <code>Ancho del rango</code> = 10</li>
</ul>
<p>La descripción de los intervalos utiliza los mismos símbolos que hemos visto en las tablas de frecuencias de R.</p>
<p>En el momento de escribir este manual, Excel no permite hacer histogramas múltiples ni agrupados por otra variable, por lo que para diseños más complejos, no hay más remedio que recurrir a otras opciones como las tablas dinámicas de Excel o, mejor aún, R.</p>
</section>
<section id="método-2-utilizar-una-tabla-dinámica" class="level4">
<h4 class="anchored" data-anchor-id="método-2-utilizar-una-tabla-dinámica">Método 2: utilizar una tabla dinámica</h4>
<p>La tabla dinámica que hemos construido en Excel ha convertido nuestra variable continua, <code>altura_cm</code>, en una tabla de valores discretos, al agrupar los valores en intervalos. En Excel podemos representar las frecuencias absolutas de nuestra tabla gráficamente, insertando un gráfico de barras a partir de la tabla:</p>
<ul>
<li>Con el cursor dentro de la tabla, seleccionamos la opción de menú <code>Insertar</code></li>
<li>Insertamos un gráfico de barras</li>
</ul>
<p>Opcionalmente, aplicamos las siguientes opciones de formato:</p>
<ul>
<li>Hacemos click sobre uno de los botones del gráfico dinámico con el boton derecho del ratón, y seleccionamos la opción ocultar todos los botones del gráfico.</li>
<li>Eliminamos el título del gráfico</li>
<li>Abrimos el formato de la serie de datos, e introducimos en la opción <code>Ancho del rango</code> el valor <span class="math inline">\(50\%\)</span> para ensanchar las barras.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01-imagenes/aula1-diag-barras.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></p>
</figure>
</div>
<p>Al utiizar la tabla dinámica para construir el gráfico, Excel utiliza las categorías de la tabla dinámica. Dado que estas categorías (los intervalos que ha formado la tabla dinámica) son discretas, Excel utiliza el resultado de la tabla dinámica para hacer el gráfico con un diagrama de barras. No es posible insertar un histograma a partir de una tabla dinámica.</p>
</section>
</section>
<section id="análisis-de-un-caso-real" class="level3">
<h3 class="anchored" data-anchor-id="análisis-de-un-caso-real">Análisis de un caso real</h3>
<p>El histograma muestra su utilidad cuando representamos la distribución de un conjunto de valores más grande que nuestros once alumnos. Veamos su aplicación a los datos diarios de una fabricación de queso camembert a lo largo de un año.Los datos de esta fabricación están en el fichero <code>camembert.csv</code>.</p>
<p>La tabla de datos tiene esta estructura:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01-imagenes/camembert-tabla-datos.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></p>
</figure>
</div>
<p>La tabla está formada por 211 casos.</p>
<p>Visualicemos la tabla con R:</p>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explicación del código R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Cargar las librerías necesarias</strong>:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DT)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>library(DT)</code></strong>: Carga el paquete <code>DT</code> para crear tablas interactivas.</li>
</ul></li>
<li><p><strong>Leer el archivo CSV</strong>:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"excel-R/camembert.csv"</span>, <span class="at">fileEncoding =</span> <span class="st">'latin1'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div></li>
<li><p><strong>Mostrar la tabla interactiva</strong>:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(df_camembert, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">5</span>), <span class="at">caption =</span> <span class="st">'Tabla de Datos de Camembert'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>datatable(df_camembert, options = list(pageLength = 5), caption = 'Tabla de Datos de Camembert')</code></strong>: Crea una tabla interactiva con <code>df_camembert</code>, mostrando cinco registros por página (<code>pageLength = 5</code>). La tabla tiene una opción para desplazarse por el resto de los datos, buscar, y ordenar.</li>
</ul></li>
</ol>
<p><strong>Resultado</strong></p>
<p>Este código generará una tabla interactiva donde podrás visualizar cinco registros a la vez y desplazarte por el resto de los datos de manera intuitiva. La función <code>datatable()</code> es excelente para manejar grandes conjuntos de datos y ofrecer una experiencia de usuario dinámica.</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span> (DT)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"excel-R/camembert.csv"</span>,<span class="at">fileEncoding=</span><span class="st">'latin1'</span>)</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Mostrar la tabla interactiva con datatable </span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="fu">datatable</span>(df_camembert, <span class="at">options =</span> <span class="fu">list</span>(<span class="at">pageLength =</span> <span class="dv">5</span>), <span class="at">caption =</span> <span class="st">'Tabla de Datos de Camembert'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="datatables html-widget html-fill-item" id="htmlwidget-a7e49f048b1c6e5038c5" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-a7e49f048b1c6e5038c5">{"x":{"filter":"none","vertical":false,"caption":"<caption>Tabla de Datos de Camembert<\/caption>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211"],["11/01/2020","12/01/2020","13/01/2020","14/01/2020","15/01/2020","18/01/2020","19/01/2020","20/01/2020","21/01/2020","22/01/2020","25/01/2020","25/01/2020","26/01/2020","26/01/2020","27/01/2020","27/01/2020","28/01/2020","28/01/2020","29/01/2020","29/01/2020","01/02/2020","02/02/2020","02/02/2020","03/02/2020","04/02/2020","05/02/2020","08/02/2020","09/02/2020","10/02/2020","11/02/2020","12/02/2020","15/02/2020","16/02/2020","17/02/2020","18/02/2020","22/02/2020","23/02/2020","23/02/2020","24/02/2020","25/02/2020","29/02/2020","01/03/2020","02/03/2020","08/03/2020","09/03/2020","10/03/2020","11/03/2020","14/03/2020","15/03/2020","16/03/2020","17/03/2020","18/03/2020","21/03/2020","22/03/2020","23/03/2020","28/03/2020","29/03/2020","04/04/2020","05/04/2020","06/04/2020","07/04/2020","11/04/2020","12/04/2020","13/04/2020","14/04/2020","15/04/2020","18/04/2020","19/04/2020","20/04/2020","21/04/2020","25/04/2020","26/04/2020","27/04/2020","28/04/2020","02/05/2020","03/05/2020","04/05/2020","05/05/2020","06/05/2020","09/05/2020","10/05/2020","11/05/2020","12/05/2020","16/05/2020","17/05/2020","18/05/2020","19/05/2020","25/05/2020","26/05/2020","27/05/2020","30/05/2020","31/05/2020","01/06/2020","06/06/2020","07/06/2020","08/06/2020","13/06/2020","14/06/2020","15/06/2020","20/06/2020","22/06/2020","27/06/2020","28/06/2020","29/06/2020","30/06/2020","04/07/2020","05/07/2020","06/07/2020","11/07/2020","12/07/2020","13/07/2020","18/07/2020","19/07/2020","20/07/2020","21/07/2020","26/07/2020","27/07/2020","28/07/2020","01/08/2020","02/08/2020","03/08/2020","04/08/2020","08/08/2020","09/08/2020","10/08/2020","11/08/2020","12/08/2020","16/08/2020","17/08/2020","18/08/2020","19/08/2020","22/08/2020","23/08/2020","24/08/2020","25/08/2020","29/08/2020","30/08/2020","31/08/2020","01/09/2020","02/09/2020","05/09/2020","06/09/2020","07/09/2020","12/09/2020","13/09/2020","14/09/2020","15/09/2020","19/09/2020","20/09/2020","21/09/2020","22/09/2020","26/09/2020","27/09/2020","28/09/2020","30/09/2020","03/10/2020","04/10/2020","05/10/2020","06/10/2020","07/10/2020","10/10/2020","11/10/2020","13/10/2020","17/10/2020","18/10/2020","19/10/2020","20/10/2020","21/10/2020","24/10/2020","25/10/2020","26/10/2020","27/10/2020","02/11/2020","02/11/2020","03/11/2020","03/11/2020","04/11/2020","04/11/2020","07/11/2020","08/11/2020","09/11/2020","10/11/2020","11/11/2020","14/11/2020","15/11/2020","16/11/2020","17/11/2020","21/11/2020","22/11/2020","23/11/2020","24/11/2020","25/11/2020","29/11/2020","30/11/2020","01/12/2020","02/12/2020","07/12/2020","12/12/2020","13/12/2020","15/12/2020","16/12/2020","19/12/2020","20/12/2020","21/12/2020","22/12/2020","23/12/2020","26/12/2020","27/12/2020","28/12/2020","29/12/2020","29/12/2020"],[1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,2,1,2,1,2,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,2,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2],[46.68,48.09,45.97,46.24,45.81,46,44.83,45.82,47.1,45.55,47.08,47.94,46.6,45.69,46.34,45.73,46.47,46.99,45.78,45.54,46.22,45.65,45.62,43.84,44.76,44.11,45.94,46.8,45.5,46.48,44.91,47.13,44.73,45.39,44.82,45.43,44.11,45.51,43.59,44.5,45.9,45.28,46.13,44.78,45.71,46.55,45.14,45.55,45.68,42.92,43.78,46.99,44.45,44.25,47.43,45.59,44.72,44.8,46.4,46.68,46.87,47.32,46.47,48.47,48.79,44.25,47.38,47.9,47.77,47.63,45.58,46.43,47.34,45.74,46.85,47.39,46.7,47.51,45.17,46.82,46.41,47.66,46.48,47.14,47.79,47.12,46.34,47.22,47.32,44.6,46.56,48.8,45.11,46.77,47.77,46.8,45.57,44.71,46.61,45.2,48.41,47.87,47.58,46.66,47.08,46.97,47.89,47.18,47.33,48.75,49.59,49.91,49.59,49.31,52.61,50.4,49.79,49.91,49.05,47.74,47.76,46.95,46.3,48.48,47.18,46.36,48.52,49.08,49.21,50.3,48.09,47.59,47.59,49.07,46.29,45.98,47.03,48.69,47.82,47.94,48.05,47.95,48.83,47.35,47.97,47.3,47.29,47.89,46.95,46.25,46.57,46.9,46.74,46.57,45.51,45.99,46.9,46.44,45.86,44.89,46.19,46.8,45.9,45.61,44.81,46.73,44.7,45.3,47.4,48.36,46.99,47,46.15,46.15,45.57,45.57,48.49,48.49,47.7,46.69,47.98,48.18,45.36,47.92,46.17,47.14,48.58,45.26,46.14,44.55,44.36,45.84,45.94,45.7,47.27,45.35,46.36,47.02,44.42,45.31,44.77,45.75,46.27,47.28,47.12,46.88,45.53,46.78,46.43,45.79,43.97],[24,25,24,23.5,23,24,23.5,25,24,24,25.5,25.5,28,26,23,23,24,24.5,23,23.5,23,23.5,22.5,22,23.5,23.5,23.5,23.5,25.5,23,23,23.5,24,24.5,23,22,22,22.5,23.5,23.5,23.5,23,24,23,22.5,23.5,23.5,22.5,23,22.5,21.5,23.5,22.5,23.5,24,23,23,22,23.5,23,23,23.5,23.5,23.5,24,23,24.5,24,23,24,23,23,23.5,22.5,23,24,23.5,24.5,24.5,23.5,23,24,23,23,24,22.5,24,23.5,25,22.5,23.5,24,23,24.5,23.5,24,23.5,23.5,24.5,23.5,24,24.5,24,24,24.5,23,23.5,23.5,24,24,24.5,25.5,25,24.5,22.5,24.5,24.5,25,23.5,25,24.5,25,23,25.5,24.5,23,24.5,26,24.5,25,25,24.5,24,25,23.5,23.5,25,24.5,25,24,23.5,24,24,24,25,24.5,25,24,24.5,23.5,23.5,23,24,23.5,23,24,24.5,23,22.5,23,24,24,22.5,23,24,25,22,22.5,24.5,25,24.5,23.5,22.5,22.5,22.5,22.5,25.5,21.5,24,24.5,24,25,23.5,24,23.5,24.5,25,23,23.5,22.5,24.5,23,24.5,22,23,24.5,22.5,24,22.5,23.5,23.5,25,23.5,25,25,24,23,23,24,23,22.5],[4.85,4.67,4.71,4.78,4.77,4.67,4.73,4.68,4.75,4.85,4.99,4.78,4.82,4.78,4.79,4.69,4.84,4.86,4.72,4.72,4.61,4.67,4.75,4.79,4.66,4.69,4.66,4.66,4.61,4.62,4.65,4.64,4.65,4.68,4.56,4.68,4.61,4.61,4.71,4.78,4.72,4.78,4.75,4.68,4.75,4.66,4.72,4.74,4.76,4.78,4.78,4.75,4.71,4.7,4.73,4.68,4.61,4.6,4.62,4.8,4.87,4.67,4.7,4.7,4.79,4.79,4.35,4.77,4.8,4.86,4.76,4.81,4.74,4.68,4.72,4.67,4.63,4.66,4.66,4.72,4.74,4.6,4.66,4.74,4.69,4.76,4.67,4.72,4.75,4.75,4.67,4.7,4.72,4.6,4.65,4.65,4.67,4.67,4.61,4.68,4.72,4.68,4.65,4.65,4.7,4.6,4.61,4.6,4.61,4.7,4.7,4.77,4.81,4.71,4.65,4.71,4.73,4.75,4.68,4.67,4.73,4.63,4.69,4.6,4.7,4.6,4.6,4.66,4.68,4.68,4.69,4.68,4.62,4.63,4.68,4.54,4.57,4.67,4.66,4.57,4.63,4.74,4.72,4.67,4.6,4.62,4.64,4.49,4.63,4.59,4.61,4.63,4.65,4.63,4.64,4.67,4.67,4.59,4.62,4.66,4.53,4.66,4.7,4.62,4.51,4.6,4.61,4.57,4.64,4.63,4.67,4.6,4.58,4.58,4.58,4.58,4.69,4.69,4.55,4.55,4.61,4.7,4.62,4.61,4.72,4.67,4.66,4.66,4.65,4.64,4.68,4.68,4.7,4.78,4.8,4.71,4.76,4.6,4.66,4.74,4.6,4.72,4.74,4.71,4.83,4.83,4.79,4.85,4.78,4.74,4.67],[1.5,1.61,1.48,1.69,1.56,1.56,1.39,1.6,1.54,1.62,1.24,1.36,1.54,1.54,1.24,1.24,1.44,1.44,1.45,1.45,1.88,1.67,1.31,1.57,1.76,1.82,1.59,1.59,1.69,-1,1.47,1.54,1.46,1.53,1.51,1.43,1.46,1.46,1.45,1.53,1.62,1.62,1.54,1.79,1.89,1.82,1.88,1.61,1.62,1.47,1.49,1.23,1.34,1.45,1.39,1.46,1.4,1.73,1.48,1.33,1.43,1.62,1.67,1.37,1.59,1.33,1.51,1.47,1.48,1.76,1.53,1.37,1.38,1.53,1.62,1.37,1.16,1.05,1.25,1.55,1.46,1.52,1.34,1.4,1.14,1.31,1.4,1.46,1.12,1.46,1.66,1.75,1.69,1.72,1.6,1.31,1.34,1.34,1.37,1.68,1.28,1.57,1.6,1.6,1.4,1.49,1.53,1.6,1.56,1.5,1.56,1.57,1.49,1.53,1.56,1.63,1.49,1.49,1.65,1.36,1.22,1.18,1.22,1.22,1.57,1.63,1.47,1.3,1.52,1.49,1.46,1.34,1.49,1.31,1.57,1.52,1.31,1.46,1.37,1.28,1.25,1.52,1.22,1.57,1.31,1.43,1.49,1.31,1.52,1.66,1.66,1.25,1.31,1.4,1.52,1.43,1.37,1.43,1.52,1.28,1.49,1.25,1.37,1.4,1.43,1.28,1.4,1.55,1.52,1.55,1.4,1.43,1.55,1.55,1.63,1.63,1.57,1.57,1.43,1.34,1.31,1.28,1.55,1.46,1.4,1.37,1.31,1.34,1.37,1.24,1.31,1.4,1.37,1.34,1.24,1.6,1.12,1.31,1.43,1.46,1.34,1.31,1.52,1.31,1.6,1.43,1.46,1.37,1.28,1.37,1.63],[80,0,9200,20,150,60,40,40,175,340,0,0,0,0,5,0,0,0,250,0,0,0,70,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,100,30,0,0,0,10,115,0,20,150,90,0,80,30,1260,160,10,5,1400,140,0,110,100,0,15,40,25,380,35,320,8200,0,10,10,400,0,110,7200,4100,1040,125,40,380,10,80,80,285,195,660,0,2000,1470,150,90,2000,250,0,0,0,0,0,0,0,415,0,880,0,2480,1200,8000,0,1500,0,0,0,0,0,0,960,0,6000,1240,1600,1600,0,10,330,1600,20200,10,0,6500,80,10,120,900,120,0,0,5,100,0,30,0,3020,50,0,30,110,5,10,10,0,0,0,0,340,0,5,0,0,130,730,0,0,0,0,0,0,0,30,0,2000,50,50,50,0,0,820,320,null,10,0,280,100,10,320,10,760,0,30,0,1130,1050,0,0,740,200,20,0,0,0,0,0,9000,70,1200,0,10,545,0,13600,10]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>fecha<\/th>\n      <th>fabricacion<\/th>\n      <th>est<\/th>\n      <th>mg<\/th>\n      <th>ph<\/th>\n      <th>cloruros<\/th>\n      <th>coliformes<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"pageLength":5,"columnDefs":[{"className":"dt-right","targets":[2,3,4,5,6,7]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"fecha","targets":1},{"name":"fabricacion","targets":2},{"name":"est","targets":3},{"name":"mg","targets":4},{"name":"ph","targets":5},{"name":"cloruros","targets":6},{"name":"coliformes","targets":7}],"order":[],"autoWidth":false,"orderClasses":false,"lengthMenu":[5,10,25,50,100]}},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<section id="construcción-del-histograma-con-excel" class="level4">
<h4 class="anchored" data-anchor-id="construcción-del-histograma-con-excel">Construcción del histograma con Excel</h4>
<section id="método-directo" class="level5">
<h5 class="anchored" data-anchor-id="método-directo">Método directo</h5>
<p>Seleccionamos el rango del extracto seco (columna <code>est</code>) e insertamos el histograma, ajustando el ancho de intervalo a <span class="math inline">\(1\)</span> en las opciones de gráfico:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01-imagenes/excel-histo.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></p>
</figure>
</div>
</section>
<section id="método-2-mediante-una-tabla-dinámica" class="level5">
<h5 class="anchored" data-anchor-id="método-2-mediante-una-tabla-dinámica">Método 2: mediante una tabla dinámica</h5>
<p>Los pasos a seguir son:</p>
<ol type="1">
<li>Construir la tabla dinámica</li>
<li>Agrupar los datos</li>
<li>Insertar el gráfico a partir de la tabla</li>
</ol>
<p>Con una agrupación de datos en intervalos de 1, esta es nuestra tabla dinámica:</p>
<p><img src="01-imagenes/camembert-td.png" class="img-fluid"></p>
<p>En la figura siguiente vemos el histograma correspondiente a la tabla anterior, con un intervalo de clase de 1 punto de extracto seco total, y otras dos alternativas si el intervalo de clase fuese de 2 puntos o de de 0,5 puntos.</p>
<div>

</div>
<div class="quarto-layout-panel" data-layout="[[1], [1,1]]">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="01-imagenes/camembert-histo1.png" class="img-fluid quarto-figure quarto-figure-center figure-img"></p>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="01-imagenes/camembert-histo2.png" class="img-fluid"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="01-imagenes/camembert-histo3.png" class="img-fluid"></p>
</div>
</div>
</div>
<p>La decisión de cambiar la amplitud del intervalo en un histograma influye en el aspecto del gráfico y es una opción personal; lo mejor es utilizar la que en nuestra opinión refleje mejor el aspecto de la distribución de datos, ni demasiado grande ni demasiado pequeña. En todo caso, debemos ser capaces de interpretar que la distribución de los valores es la misma en los tres casos: hay una mayoría de casos con valores entre 46 y 48, y muy pocos casos con valores muy bajos o muy altos. En este caso, la distribución de los valores es aproximadamente simétrica, y se reparten alrededor de una mayoría de valores centrales.</p>
</section>
</section>
<section id="histograma-en-r-en-dos-etapas" class="level4">
<h4 class="anchored" data-anchor-id="histograma-en-r-en-dos-etapas">Histograma en R en dos etapas</h4>
<p>Como hemos visto en Excel, la construcción de un histograma implica siempre dos etapas:</p>
<ul>
<li>agrupación de los datos en una tabla de frecuencia (tabla dinámica), y</li>
<li>creación del gráfico a partir de esta tabla.</li>
</ul>
<p>Aunque R dispone de funciones que realizan automáticamente estas etapas, y que veremos más tarde, de forma didáctica vamos a construir por separado la tabla de frecuencias y el histograma de la variable <code>est</code>en R, siguiendo los pasos básicos que hemos dado en Excel. Nuestro script nos mostrará la tabla de frecuencias y, a continuación, el histograma.</p>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explicación del código R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Cargar la biblioteca <code>tidyverse</code></strong></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Descripción</strong>: Carga el paquete <strong>tidyverse</strong>, que es una colección de paquetes R diseñada para la manipulación y visualización de datos.
<ul>
<li><strong>Paquetes incluidos</strong>: Entre otros, incluye <code>ggplot2</code> (para visualización), <code>dplyr</code> (para manipulación de datos), <code>tidyr</code> (para ordenar datos) y <code>readr</code> (para leer datos).</li>
</ul></li>
</ul>
<hr>
<p><strong>Leer el archivo CSV</strong></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"excel-R/camembert.csv"</span>, <span class="at">fileEncoding =</span> <span class="st">'latin1'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Descripción</strong>: Lee un archivo CSV (<code>camembert.csv</code>) y lo almacena en el dataframe <code>df_camembert</code>.</li>
<li><strong>Opciones</strong>:
<ul>
<li><code>fileEncoding = 'latin1'</code>: Especifica la codificación del archivo para asegurar que los caracteres se lean correctamente. <strong>latin1</strong> es adecuado para idiomas europeos occidentales.</li>
</ul></li>
</ul>
<hr>
<p><strong>Crear la tabla de frecuencias</strong></p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">intervalo =</span> <span class="fu">cut</span>(est, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">40</span>, <span class="dv">54</span>, <span class="at">by =</span> <span class="dv">1</span>), <span class="at">include_lowest =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(intervalo) <span class="sc">|&gt;</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">frec_abs =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">frec_rel =</span> frec_abs <span class="sc">/</span> <span class="fu">sum</span>(frec_abs)) <span class="sc">|&gt;</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="sc">|&gt;</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> intervalo, <span class="at">y =</span> frec_abs)) <span class="sc">+</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Diagrama de Barras de Frecuencia absoluta"</span>,</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Intervalos de 'est'"</span>,</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frecuencia Absoluta"</span>) <span class="sc">+</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>1. <code>mutate()</code></strong></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">intervalo =</span> <span class="fu">cut</span>(est, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">40</span>, <span class="dv">54</span>, <span class="at">by =</span> <span class="dv">1</span>), <span class="at">include_lowest =</span> <span class="cn">TRUE</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Descripción</strong>: Añade una nueva columna <code>intervalo</code> al dataframe.</li>
<li><strong><code>cut</code></strong>: Corta la variable <code>est</code> en intervalos especificados.
<ul>
<li><strong><code>breaks = seq(40, 54, by = 1)</code></strong>: Define los puntos de corte desde 40 hasta 54, incrementando de 1 en 1.</li>
<li><strong><code>include_lowest = TRUE</code></strong>: Incluye el valor más bajo en el primer intervalo.</li>
</ul></li>
</ul>
<p><strong>2. <code>group_by()</code></strong></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(intervalo)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Descripción</strong>: Agrupa los datos por los intervalos creados en el paso anterior.</li>
</ul>
<p><strong>3. <code>summarise()</code></strong></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(<span class="at">frec_abs =</span> <span class="fu">n</span>())</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Descripción</strong>: Calcula la frecuencia absoluta (<code>frec_abs</code>) de cada intervalo.</li>
<li><strong><code>n()</code></strong>: Cuenta el número de elementos en cada grupo.</li>
</ul>
<p><strong>4. <code>mutate()</code></strong></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">frec_rel =</span> frec_abs <span class="sc">/</span> <span class="fu">sum</span>(frec_abs))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Descripción</strong>: Añade una nueva columna <code>frec_rel</code> al dataframe.
<ul>
<li><strong><code>frec_rel = frec_abs / sum(frec_abs)</code></strong>: Calcula la frecuencia relativa dividiendo cada frecuencia absoluta por la suma total de frecuencias absolutas.</li>
</ul></li>
</ul>
<p><strong>5. <code>print()</code></strong></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Descripción</strong>: Imprime el dataframe resultante que contiene las frecuencias absolutas y relativas.</li>
</ul>
<hr>
<p><strong>Crear el diagrama de barras</strong></p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> intervalo, <span class="at">y =</span> frec_abs)) <span class="sc">+</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Diagrama de Barras de Frecuencia absoluta"</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Intervalos de 'est'"</span>,</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frecuencia Absoluta"</span>) <span class="sc">+</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p><strong>1. <code>ggplot()</code></strong></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> intervalo, <span class="at">y =</span> frec_abs))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Descripción</strong>: Configura <code>ggplot2</code> para usar <code>intervalo</code> en el eje X y <code>frec_abs</code> en el eje Y.</li>
<li><strong><code>aes</code></strong>: Define las estéticas del gráfico, es decir, qué variables van en qué ejes.</li>
</ul>
<p><strong>2. <code>geom_bar()</code></strong></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">color =</span> <span class="st">"black"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Descripción</strong>: Crea un diagrama de barras utilizando los valores proporcionados.</li>
<li><strong>Opciones</strong>:
<ul>
<li><strong><code>stat = "identity"</code></strong>: Usa los valores proporcionados para la altura de las barras, en lugar de calcularlos automáticamente.</li>
<li><strong><code>fill = "lightblue"</code></strong>: Establece el color de relleno de las barras a azul claro.</li>
<li><strong><code>alpha = 0.7</code></strong>: Define la transparencia de las barras (0.7 significa 70% opaco).</li>
<li><strong><code>color = "black"</code></strong>: Establece el color del borde de las barras a negro.</li>
</ul></li>
</ul>
<p><strong>3. <code>labs()</code></strong></p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Diagrama de Barras de Frecuencia absoluta"</span>,</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">x =</span> <span class="st">"Intervalos de 'est'"</span>,</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">y =</span> <span class="st">"Frecuencia Absoluta"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Descripción</strong>: Añade títulos y etiquetas a los ejes del gráfico.</li>
<li><strong>Opciones</strong>:
<ul>
<li><strong><code>title</code></strong>: Título del gráfico.</li>
<li><strong><code>x</code></strong>: Etiqueta del eje X.</li>
<li><strong><code>y</code></strong>: Etiqueta del eje Y.</li>
</ul></li>
</ul>
<p><strong>4. <code>theme_minimal()</code></strong></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong>Descripción</strong>: Aplica un tema minimalista al gráfico, eliminando elementos innecesarios y enfocándose en la claridad del gráfico.</li>
</ul>
<hr>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span> (tidyverse)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"excel-R/camembert.csv"</span>,<span class="at">fileEncoding=</span><span class="st">'latin1'</span>)</span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Crear tabla de frecuencias</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">intervalo =</span> <span class="fu">cut</span>(est, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">40</span>, <span class="dv">54</span>, <span class="at">by =</span><span class="dv">1</span>), <span class="at">include_lowest =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(intervalo) <span class="sc">|&gt;</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span> (<span class="at">frec_abs =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">frec_rel =</span> frec_abs <span class="sc">/</span> <span class="fu">sum</span>(frec_abs)) <span class="sc">|&gt;</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>() <span class="sc">|&gt;</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> intervalo, <span class="at">y =</span> frec_abs)) <span class="sc">+</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Diagrama de Barras de Frecuencia absoluta"</span>,</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Intervalos de 'est'"</span>,</span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frecuencia Absoluta"</span>) <span class="sc">+</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   intervalo frec_abs frec_rel
   &lt;fct&gt;        &lt;int&gt;    &lt;dbl&gt;
 1 (42,43]          1  0.00474
 2 (43,44]          4  0.0190 
 3 (44,45]         23  0.109  
 4 (45,46]         48  0.227  
 5 (46,47]         56  0.265  
 6 (47,48]         49  0.232  
 7 (48,49]         17  0.0806 
 8 (49,50]         10  0.0474 
 9 (50,51]          2  0.00948
10 (52,53]          1  0.00474</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="040-exploracion_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Modificando el criterio de la amplitud de clase para agrupar de dos en dos en vez de uno, podemos cambiar la tabla, igual que hemos hecho en Excel.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span> (tidyverse)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"excel-R/camembert.csv"</span>,<span class="at">fileEncoding=</span><span class="st">'latin1'</span>)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">intervalo =</span> <span class="fu">cut</span>(est, <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">40</span>, <span class="dv">54</span>, <span class="at">by =</span><span class="dv">2</span>), <span class="at">include_lowest =</span> <span class="cn">TRUE</span>)) <span class="sc">|&gt;</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(intervalo) <span class="sc">|&gt;</span></span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span> (<span class="at">frec_abs =</span> <span class="fu">n</span>()) <span class="sc">|&gt;</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">frec_rel =</span> frec_abs <span class="sc">/</span> <span class="fu">sum</span>(frec_abs)) <span class="sc">|&gt;</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> intervalo, <span class="at">y =</span> frec_abs)) <span class="sc">+</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>   <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>   <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Diagrama de Barras de Frecuencia absoluta"</span>,</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Intervalos de 'est'"</span>,</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Frecuencia absoluta (núm. de casos)"</span>) <span class="sc">+</span></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>   <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="040-exploracion_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="creación-del-histograma-en-r-directamente" class="level4">
<h4 class="anchored" data-anchor-id="creación-del-histograma-en-r-directamente">Creación del histograma en R directamente</h4>
<p>Las funciones de histograma de R permiten construir el histograma directamente sin necesidad de hacer previamente una tabla de frecuencias (en realidad, la tabla de frecuencias se calcula internamente). Es mucho más sencillo utilizar estas funciones, ya que el código se simplifica mucho.</p>
<p>Como siempre, presentamos la opción básica de R junto con la opción de la función <code>ggplot()</code> de <code>tidyverse</code>, y utilizamos las opciones de personalización de <code>ggplot()</code>para trazar un histograma de aspecto semejante al gráfico básico; en esta ocasión, utilizamos el color de relleno gris.</p>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explicación del código R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Primer Fragmento de Código:</strong> <code>hist(df_camembert$est)</code></p>
<ol type="1">
<li><p><strong>Crear un Histograma Base</strong>:</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(df_camembert<span class="sc">$</span>est)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>hist(df_camembert$est)</code></strong>: Esta línea de código crea un histograma básico de la variable <code>est</code> del dataframe <code>df_camembert</code> utilizando la función <code>hist()</code> de base R.
<ul>
<li><strong><code>df_camembert$est</code></strong>: Especifica la columna <code>est</code> del dataframe <code>df_camembert</code> para la cual se generará el histograma.</li>
</ul></li>
<li>La función <code>hist()</code> por defecto elige la cantidad y el ancho de las barras basándose en los datos proporcionados.</li>
</ul></li>
</ol>
<p><strong>Segundo Fragmento de Código: <code>ggplot</code> y <code>geom_histogram()</code></strong></p>
<ol start="2" type="1">
<li><p><strong>Utilizar <code>ggplot2</code> para Crear un Histograma Personalizado</strong>:</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est)) <span class="sc">+</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"grey"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>df_camembert |&gt;</code></strong>: Utiliza el operador pipe (<code>|&gt;</code>) para encadenar operaciones sobre el dataframe <code>df_camembert</code>.</li>
</ul></li>
<li><p><strong>Iniciar <code>ggplot</code> con las Estéticas (aes)</strong>:</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est)) <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>ggplot(aes(x = est))</code></strong>: Inicia un objeto <code>ggplot</code> y define las estéticas (aes), mapeando la variable <code>est</code> al eje X.</li>
</ul></li>
<li><p><strong>Agregar las Barras del Histograma</strong>:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"grey"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>geom_histogram(binwidth = 1, fill = "grey", alpha = 0.7, color = "black")</code></strong>: Añade una capa de barras al histograma.
<ul>
<li><strong><code>binwidth = 1</code></strong>: Define la amplitud de clase en 1 unidad.</li>
<li><strong><code>fill = "grey"</code></strong>: Colorea las barras del histograma de gris.</li>
<li><strong><code>alpha = 0.7</code></strong>: Establece la transparencia de las barras (valor entre 0 y 1, donde 0 es completamente transparente y 1 es opaco).</li>
<li><strong><code>color = "black"</code></strong>: Colorea los bordes de las barras en negro.</li>
</ul></li>
</ul></li>
<li><p><strong>Aplicar un Tema Minimalista</strong>:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>theme_minimal()</code></strong>: Aplica un tema minimalista al gráfico, proporcionando un diseño limpio y simple, sin distracciones innecesarias.</li>
</ul></li>
</ol>
<p><strong>Resumen completo del código</strong></p>
<ul>
<li><p><strong>Primer Fragmento</strong>:</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(df_camembert<span class="sc">$</span>est)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>crea un histograma básico de la variable <code>est</code> usando la función base <code>hist()</code> de R.</p></li>
<li><p><strong>Segundo Fragmento</strong>:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est)) <span class="sc">+</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"darkblue"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Este conjunto de instrucciones crea un histograma más personalizable y estilizado usando <code>ggplot2</code>, con opciones para el ancho de las barras, color de relleno, transparencia y estilo del tema.</p></li>
</ul>
</div>
</div>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(df_camembert<span class="sc">$</span>est)</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>est)) <span class="sc">+</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth=</span><span class="dv">1</span>, <span class="at">fill =</span> <span class="st">"grey"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-histo1" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-histo1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-histo1" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-histo1-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-histo1-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-histo1-1.png" class="img-fluid figure-img" data-ref-parent="fig-histo1" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-histo1-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Función básica de R
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-histo1" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-histo1-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-histo1-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-histo1-2.png" class="img-fluid figure-img" data-ref-parent="fig-histo1" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-histo1-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Función ggplot()
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-histo1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.1: Ejemplos de histogramas
</figcaption>
</figure>
</div>
<p>Vemos que los dos gráficos no son idénticos a pesar de provenir de los mismos datos, porque la construcción de los intervalos subyacente es ligeramente diferente. Esto no debe preocuparnos, porque el aspecto general de la distribución de los datos es el mismo.</p>
<p>En la fase de exploración nos importa más entender estas propiedades de los datos (aspecto, forma de la distribución) que la precisión en la construcción del gráfico. En todo caso, en <code>qqplot()</code>podemos usar infinidad de opciones que nos permiten configurar el gráfico hasta los más mínimos detalles, por lo que esta función es mucho más útil que las funciones básicas para preparar gráficos que vayan destinados a informes o presentaciones. La función básica <code>hist()</code>, por su parte, es más sencilla de usar al principio cuando no tenemos todavía experiencia con <code>ggplot()</code>, y también para una visualización rápida.</p>
</section>
</section>
<section id="otros-ejemplos" class="level3">
<h3 class="anchored" data-anchor-id="otros-ejemplos">Otros ejemplos</h3>
<p>En ocasiones, nos encontramos con datos que son asimétricos: hay una mayoría de valores bajos o bien de valores altos. Veamos un caso: los recuentos bacterianos de bacterias coliformes, que tenemos en la última columna a la derecha de nuestra tabla, en la variable ´coliformes´.</p>
<p><img src="01-imagenes/camembert-graf-colis.png" class="img-fluid"></p>
<p>En este caso, vemos que la mayoría de los casos tienen valor cero. Es el caso de los recuentos de bacterias contaminantes, en el que la mayoría de los análisis tienen recuentos cero o muy bajos, y sólo en pocos casos tienen valores altos. Veremos con más detalle cómo tratar estas distribuciones cuando hablemos de las distribuciones de probabilidad, en capítulos posteriores.</p>
<p>En los histogramas de los recuentos bacterianos,utilizamos una opción para aumentar el número de barras que queremos en el histograma: <code>breaks=</code> en la función base, <code>bins=</code> en <code>ggplot()</code>:</p>
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(df_camembert<span class="sc">$</span>coliformes, <span class="at">breaks=</span><span class="dv">50</span>)</span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>coliformes)) <span class="sc">+</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">50</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">colour=</span><span class="st">"black"</span>)<span class="sc">+</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-histo2" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-histo2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-histo2" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-histo2-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-histo2-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-histo2-1.png" class="img-fluid figure-img" data-ref-parent="fig-histo2" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-histo2-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Función básica de R
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-histo2" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-histo2-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-histo2-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-histo2-2.png" class="img-fluid figure-img" data-ref-parent="fig-histo2" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-histo2-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Función ggplot()
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-histo2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.2: Ejemplos de histogramas
</figcaption>
</figure>
</div>
<p>En casos de distribuciones muy asimétricas, a veces es conveniente aplicar una transformación a los datos, tal como el logaritmo decimal, mediante la función <code>log10()</code>; esto facilita la interpretación del gráfico:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">log10</span>(coliformes<span class="sc">+</span><span class="dv">1</span>))) <span class="sc">+</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="at">bins=</span><span class="dv">50</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">colour=</span><span class="st">"black"</span>)<span class="sc">+</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_bw</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="040-exploracion_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:75.0%"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="gráficos-de-densidad" class="level2" data-number="4.6">
<h2 data-number="4.6" class="anchored" data-anchor-id="gráficos-de-densidad"><span class="header-section-number">4.6</span> Gráficos de densidad</h2>
<p>Un gráfico de densidad en R es una representación visual suavizada de la distribución de un conjunto de datos. A diferencia de los histogramas, que dividen los datos en intervalos y cuentan las frecuencias, los gráficos de densidad utilizan técnicas estadísticas no paramétricas para estimar la función de densidad de probabilidad.</p>
<p>Un gráfico de densidad, también conocido como <em>density plot</em>, es una representación visual suavizada de la distribución de un conjunto de datos.A diferencia de los histogramas, que dividen los datos en intervalos y cuentan las frecuencias, los gráficos de densidad utilizan técnicas estadísticas no paramétricas para estimar la función de densidad de probabilidad de una variable continua. El gráfico de densidad utiliza suavizamiento para proporcionar una estimación más continua de la distribución de los datos.</p>
<p>Excel no permite la representación de los gráficos de densidad; en R pueden hacerse con la función <code>ggplot()</code>simplemente añadiendo la geometría <code>geom_density()</code></p>
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>est)) <span class="sc">+</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>()</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="fu">log</span>(coliformes<span class="sc">+</span><span class="dv">1</span>))) <span class="sc">+</span></span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-charts" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-charts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-charts" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-charts-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-charts-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-charts-1.png" class="img-fluid figure-img" data-ref-parent="fig-charts" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-charts-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) EST
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-charts" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-charts-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-charts-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-charts-2.png" class="img-fluid figure-img" data-ref-parent="fig-charts" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-charts-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) coliformes
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-charts-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.3: Ejemplos de diagramas de densidad
</figcaption>
</figure>
</div>
<p>Podemos representar simultáneamente el histograma y la función de densidad; hay que tener en cuenta que para representar la densidad y el histograma superpuestos, nos vemos obligados a cambiar la escala del eje Y a los valores de densidad en vez de a las frecuencias, de manera que los dos gráficos puedan solaparse sin problemas.</p>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explicación del código R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Iniciar el pipeline con <code>df_camembert</code></strong>:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Utiliza el operador pipe (<code>|&gt;</code>) para encadenar operaciones sobre el dataframe <code>df_camembert</code>.</li>
</ul></li>
<li><p><strong>Iniciar <code>ggplot</code> con las estéticas (aes)</strong>:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est)) <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>ggplot(aes(x = est))</code></strong>: Inicia un objeto <code>ggplot</code> y define las estéticas (aes). La variable <code>est</code> se mapea al eje X.</li>
</ul></li>
<li><p><strong>Agregar la capa del histograma</strong>:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">bins =</span> <span class="dv">20</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>geom_histogram(aes(y = ..density..), bins = 20, fill = "lightblue", color = "black")</code></strong>:
<ul>
<li><strong><code>aes(y = ..density..)</code></strong>: Ajusta el eje Y para que muestre la densidad en lugar de la frecuencia absoluta.</li>
<li><strong><code>bins = 20</code></strong>: Especifica el número de barras (bins) en el histograma.</li>
<li><strong><code>fill = "lightblue"</code></strong>: Colorea las barras del histograma de azul claro.</li>
<li><strong><code>color = "black"</code></strong>: Colorea los bordes de las barras en negro.</li>
</ul></li>
</ul></li>
<li><p><strong>Agregar la capa de densidad</strong>:</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_density</span>(<span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>geom_density(color = "red", size = 1)</code></strong>: Añade una capa de densidad al gráfico.
<ul>
<li><strong><code>color = "red"</code></strong>: Colorea la línea de densidad en rojo.</li>
<li><strong><code>size = 1</code></strong>: Establece el grosor de la línea de densidad.</li>
</ul></li>
</ul></li>
<li><p><strong>Agregar etiquetas y título</strong>:</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histograma y densidad"</span>, <span class="at">x =</span> <span class="st">"Valores"</span>, <span class="at">y =</span> <span class="st">"Densidad"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>labs(title = "Histograma y densidad", x = "Valores", y = "Densidad")</code></strong>: Añade etiquetas y título al gráfico.
<ul>
<li><strong><code>title = "Histograma y densidad"</code></strong>: Establece el título del gráfico.</li>
<li><strong><code>x = "Valores"</code></strong>: Etiqueta el eje X como “Valores”.</li>
<li><strong><code>y = "Densidad"</code></strong>: Etiqueta el eje Y como “Densidad”.</li>
</ul></li>
</ul></li>
</ol>
<p><strong>Resumen Completo</strong></p>
<p>El código realiza las siguientes acciones:</p>
<ul>
<li>Inicia el pipeline con el dataframe <code>df_camembert</code>.</li>
<li>Define la estética (aes) para mapear la variable <code>est</code> al eje X.</li>
<li>Añade un histograma con barras azules claras, bordes negros, 20 bins y ajusta el eje Y para mostrar la densidad.</li>
<li>Añade una capa de densidad con una línea roja y grosor de 1.</li>
<li>Añade un título y etiquetas a los ejes X y Y.</li>
</ul>
<p>Este enfoque combinado permite visualizar tanto la distribución de los datos (histograma) como la densidad estimada (línea de densidad) en un solo gráfico.</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>est)) <span class="sc">+</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">bins =</span> <span class="dv">20</span>, <span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>) <span class="sc">+</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histograma y densidad"</span>, <span class="at">x =</span> <span class="st">"Valores"</span>, <span class="at">y =</span> <span class="st">"Densidad"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="040-exploracion_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>La ventaja de los gráficos de densidad es que como no tenemos que fraccionar los datos en intervalos arbitrarios, no estamos afectados por el efecto visual de la anchura de estos intervalos. También hay otras ventajas desde el punto de vista estadístico, que veremos al hablar de las distribuciones de probabilidad.</p>
<p>La flexibilidad de configuración de los gráficos de <code>qqplot()</code>permite la personalización de los gráficos hasta el último detalle. A continuación vemos un gráfico de densidad agrupado por meses, que nos muestra aparentes diferencias en el extracto seco <code>est</code> según los meses.</p>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-12-contents" aria-controls="callout-12" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explicación del código R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-12" class="callout-12-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>1. Leer el archivo CSV</strong></p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"excel-R/camembert.csv"</span>, <span class="at">fileEncoding =</span> <span class="st">'latin1'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>df_camembert &lt;- read.csv2("excel-R/camembert.csv", fileEncoding = 'latin1')</code></strong>: Esta línea lee el archivo CSV llamado <code>camembert.csv</code> desde la carpeta <code>excel-R</code> y lo almacena en el dataframe <code>df_camembert</code>. La opción <code>fileEncoding = 'latin1'</code> asegura que los caracteres especiales sean manejados correctamente durante la lectura del archivo.</li>
</ul>
<p><strong>2. Iniciar el pipeline con el dataframe <code>df_camembert</code> y realizar transformaciones</strong></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fecha =</span> <span class="fu">as.Date</span>(fecha, <span class="at">format =</span> <span class="st">"%d/%m/%Y"</span>), <span class="co"># Convertir a tipo Date </span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mes =</span> <span class="fu">format</span>(fecha, <span class="st">"%m"</span>)) <span class="sc">|&gt;</span> <span class="co"># Extraer el mes</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>df_camembert |&gt;</code></strong>: Utiliza el operador pipe (<code>|&gt;</code>) para encadenar operaciones sobre el dataframe <code>df_camembert</code>.</li>
<li><strong><code>mutate(fecha = as.Date(fecha, format = "%d/%m/%Y"), mes = format(fecha, "%m"))</code></strong>:
<ul>
<li><strong><code>fecha = as.Date(fecha, format = "%d/%m/%Y")</code></strong>: Convierte la columna <code>fecha</code> a tipo Date usando el formato <code>día/mes/año</code>.</li>
<li><strong><code>mes = format(fecha, "%m")</code></strong>: Extrae el mes de la columna <code>fecha</code> y lo almacena en una nueva columna <code>mes</code>.</li>
</ul></li>
</ul>
<p><strong>3. Crear el gráfico de densidad</strong></p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est, <span class="at">color =</span> mes, <span class="at">fill =</span> mes)) <span class="sc">+</span> <span class="co"># Crear el gráfico de densidad</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> <span class="co"># Añadir capa de densidad con transparencia</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Curvas de Densidad de 'est' por Mes"</span>, </span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Valor de 'est'"</span>, </span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Densidad"</span>, </span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">"Mes"</span>, </span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Mes"</span>) <span class="sc">+</span> </span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>ggplot(aes(x = est, color = mes, fill = mes))</code></strong>: Inicia un objeto <code>ggplot</code> y define las estéticas (aes):
<ul>
<li><strong><code>x = est</code></strong>: Mapea la variable <code>est</code> al eje X.</li>
<li><strong><code>color = mes, fill = mes</code></strong>: Usa la variable <code>mes</code> para colorear y rellenar las curvas de densidad, permitiendo diferenciar los meses.</li>
</ul></li>
<li><strong><code>geom_density(alpha = 0.5)</code></strong>: Añade una capa de densidad al gráfico:
<ul>
<li><strong><code>alpha = 0.5</code></strong>: Establece la transparencia de las curvas de densidad al 50%, lo que permite ver superposiciones.</li>
</ul></li>
<li><strong><code>labs(title = "Curvas de Densidad de 'est' por Mes", x = "Valor de 'est'", y = "Densidad", color = "Mes", fill = "Mes")</code></strong>: Añade etiquetas y título al gráfico:
<ul>
<li><strong><code>title = "Curvas de Densidad de 'est' por Mes"</code></strong>: Título del gráfico.</li>
<li><strong><code>x = "Valor de 'est'"</code></strong>: Etiqueta del eje X.</li>
<li><strong><code>y = "Densidad"</code></strong>: Etiqueta del eje Y.</li>
<li><strong><code>color = "Mes", fill = "Mes"</code></strong>: Etiquetas para la leyenda de colores y rellenos.</li>
</ul></li>
<li><strong><code>theme_minimal()</code></strong>: Aplica un tema minimalista al gráfico para un diseño limpio y simple.</li>
</ul>
<p><strong>Resumen</strong></p>
<p>Este código realiza las siguientes acciones: 1. Lee un archivo CSV y lo almacena en un dataframe. 2. Convierte la columna <code>fecha</code> a tipo Date y extrae el mes de la fecha. 3. Crea un gráfico de densidad de la variable <code>est</code> diferenciada por mes con transparencia para facilitar la visualización de superposiciones y aplica un diseño minimalista al gráfico.</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"excel-R/camembert.csv"</span>, <span class="at">fileEncoding =</span> <span class="st">'latin1'</span>) </span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span> </span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">fecha =</span> <span class="fu">as.Date</span>(fecha, <span class="at">format =</span> <span class="st">"%d/%m/%Y"</span>), <span class="co"># Convertir a tipo Date </span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">mes =</span> <span class="fu">format</span>(fecha, <span class="st">"%m"</span>)) <span class="sc">|&gt;</span> <span class="co"># Extraer el mes </span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est, <span class="at">color =</span> mes, <span class="at">fill =</span> mes)) <span class="sc">+</span> <span class="co"># Crear el gráfico de densidad </span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> <span class="co"># Añadir capa de densidad con transparencia </span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Curvas de Densidad de 'est' por Mes"</span>, <span class="at">x =</span> <span class="st">"Valor de 'est'"</span>, <span class="at">y =</span> <span class="st">"Densidad"</span>, <span class="at">color =</span> <span class="st">"Mes"</span>, <span class="at">fill =</span> <span class="st">"Mes"</span>)<span class="sc">+</span>    </span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="040-exploracion_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="diagrama-de-caja-o-boxplot" class="level2" data-number="4.7">
<h2 data-number="4.7" class="anchored" data-anchor-id="diagrama-de-caja-o-boxplot"><span class="header-section-number">4.7</span> Diagrama de caja o <em>boxplot</em></h2>
<p>Este gráfico fue creado por el estadístico John Tukey en 1977, y es una herramienta fundamental en la exploración de datos. Se basa en un grupo de medidas que se utiliza ampliamente en la descripción de conjuntos de datos, el conjunto de <strong>cuartiles</strong>. Si dividimos un grupo de datos <strong>ordenados</strong> en cuatro partes iguales, mediante <strong>tres</strong> puntos de corte, llamamos <strong>primer cuartil</strong> o <span class="math inline">\(Q1\)</span> al valor que se situa en el 25%; <strong>segundo cuartil</strong>, o <span class="math inline">\(Q2\)</span>, al valor que se sitúa en el centro (50%), y <strong>tercer cuartil</strong>, o <span class="math inline">\(Q3\)</span>, al punto que se situa en el 75% de los datos. A estos tres valores añadimos el <strong>mínimo</strong> y el <strong>máximo</strong>, y tenemos un conjunto de <strong>cinco números</strong> que nos permiten describir la forma de la distribución de datos con cierta precisión. El segundo cuartil (<span class="math inline">\(Q2\)</span>), que corresponde al 50% de los datos, se conoce habitualmente como <strong>mediana</strong>. El valor resultante de restar <span class="math inline">\(Q3-Q1\)</span> es lo que se conoce como <strong>rango intercuartil</strong> o <span class="math inline">\(IQR\)</span>, y es una medida de la dispersión de la distribución de datos (mide la amplitud de la distribución).</p>
<p>El <strong>diagrama de caja</strong>, también conocido como <em>boxplot</em>, es un gráfico que permite resumir las características principales de un conjunto de datos utilizando estos cinco números, tal como se explica a continuación. Sus ventajas son:</p>
<ul>
<li>Muestra la mediana y los cuartiles (Q1 y Q3) de los datos.</li>
<li>Permite identificar la simetría de la distribución: si la mediana no está en el centro, la distribución no es simétrica.</li>
<li>Permite detectar posibles valores atípicos, representando los valores atípicos (<em>outliers</em>) que están lejos del resto de los datos (un valor es atípico si está más allá de (Q3 + 1.5 IQR) o (Q1 - 1.5 IQR).</li>
</ul>
<p>La construcción de un diagrama de caja es como sigue:</p>
<p><img src="01-imagenes/boxplot.svg" class="img-fluid"></p>
<p>Microsoft Excel no dispone de un diseño de gráficos de caja que sea práctico, por lo que recurriremos siempre a R para realizarlos.</p>
<p>Como casi siempre, hay una función de base que dibuja un <em>boxplot</em> y también una geometría de <code>ggplot()</code>que lo hace: <code>geom_boxplot()</code>, con muchas más opciones de diseño y formato que la opción de base.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(df_aula<span class="sc">$</span>altura_cm)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-boxplot" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-boxplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-boxplot-1.png" class="img-fluid figure-img" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-boxplot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.4: Boxplot con los gráficos básicos de R
</figcaption>
</figure>
</div>
</div>
</div>
<p>Vamos a repetir el gráfico para los datos de producción de queso camembert, usando ahora los gráficos básicos y los de <code>ggplot()</code>:</p>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explicación del código R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Leer el archivo CSV</strong>:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"excel-R/camembert.csv"</span>, <span class="at">fileEncoding =</span> <span class="st">'latin1'</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>df_camembert &lt;- read.csv2("excel-R/camembert.csv", fileEncoding = 'latin1')</code></strong>: Lee el archivo CSV denominado <code>camembert.csv</code> y lo almacena en el dataframe <code>df_camembert</code>. La opción <code>fileEncoding = 'latin1'</code> asegura que los caracteres especiales se manejen correctamente durante la lectura del archivo.</li>
</ul></li>
<li><p><strong>Convertir la columna <code>fecha</code> a tipo <code>Date</code></strong>:</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>df_camembert<span class="sc">$</span>fecha <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(df_camembert<span class="sc">$</span>fecha, <span class="fu">format</span>(<span class="st">"%d/%m/%Y"</span>))</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>df_camembert$fecha &lt;- as.Date(df_camembert$fecha, format("%d/%m/%Y"))</code></strong>: Convierte la columna <code>fecha</code> en el dataframe <code>df_camembert</code> al tipo de dato <code>Date</code> usando el formato de fecha <code>"%d/%m/%Y"</code>, que corresponde a día/mes/año.</li>
</ul></li>
<li><p><strong>Crear un boxplot básico de la variable <code>est</code></strong>:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(df_camembert<span class="sc">$</span>est)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>boxplot(df_camembert$est)</code></strong>: Crea un diagrama de caja y bigotes (boxplot) básico para la variable <code>est</code> del dataframe <code>df_camembert</code>. Este gráfico muestra la distribución de los datos, destacando la mediana, cuartiles y posibles valores atípicos.</li>
</ul></li>
<li><p><strong>Crear un boxplot personalizado utilizando <code>ggplot2</code></strong>:</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> est)) <span class="sc">+</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),  <span class="co"># Oculta las etiquetas del eje x</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>()) <span class="co"># Oculta las marcas del eje x</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>df_camembert |&gt;</code></strong>: Utiliza el operador pipe (<code>|&gt;</code>) para encadenar operaciones sobre el dataframe <code>df_camembert</code>.</li>
</ul></li>
<li><p><strong>Iniciar <code>ggplot</code> con las estéticas (aes)</strong>:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> est)) <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>ggplot(aes(x = "", y = est))</code></strong>: Inicia un objeto <code>ggplot</code> y define las estéticas (aes). La variable <code>est</code> se mapea al eje Y. No se especifica una variable en el eje X, por lo que se deja como una cadena vacía <code>""</code>.</li>
</ul></li>
<li><p><strong>Agregar la capa del boxplot</strong>:</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_boxplot</span>() <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>geom_boxplot()</code></strong>: Añade una capa de boxplot al gráfico, que muestra la distribución de la variable <code>est</code>.</li>
</ul></li>
<li><p><strong>Aplicar un tema en blanco y negro</strong>:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_bw</span>() <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>theme_bw()</code></strong>: Aplica un tema en blanco y negro al gráfico, proporcionando un diseño limpio y clásico.</li>
</ul></li>
<li><p><strong>Personalizar el tema</strong>:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),  <span class="co"># Oculta las etiquetas del eje x</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>()) <span class="co"># Oculta las marcas del eje x</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>theme(axis.text.x = element_blank(), axis.ticks.x = element_blank())</code></strong>: Personaliza el tema para ocultar las etiquetas del eje X y las marcas del eje X, dejando un gráfico más claro y limpio.</li>
</ul></li>
</ol>
<p>El código realiza las siguientes acciones:</p>
<ul>
<li>Lee un archivo CSV y lo convierte en un dataframe.</li>
<li>Convierte la columna <code>fecha</code> a tipo <code>Date</code>.</li>
<li>Crea un boxplot básico de la variable <code>est</code>.</li>
<li>Utiliza <code>ggplot2</code> para crear un boxplot más personalizable de la variable <code>est</code>, aplicando un tema en blanco y negro y ocultando las etiquetas y marcas del eje X.</li>
</ul>
</div>
</div>
</div>
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="ot">&lt;-</span> <span class="fu">read.csv2</span>(<span class="st">"excel-R/camembert.csv"</span>,<span class="at">fileEncoding=</span><span class="st">'latin1'</span>)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>df_camembert<span class="sc">$</span>fecha <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(df_camembert<span class="sc">$</span>fecha, <span class="fu">format</span>(<span class="st">"%d/%m/%Y"</span>))</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(df_camembert<span class="sc">$</span>est)</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span><span class="st">""</span>, <span class="at">y=</span>est))<span class="sc">+</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>() <span class="sc">+</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),  <span class="co"># Oculta las etiquetas del eje x</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>()) <span class="co"># Oculta las marcas del eje x</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-boxplot2" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-boxplot2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-boxplot2" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-boxplot2-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-boxplot2-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-boxplot2-1.png" class="img-fluid figure-img" data-ref-parent="fig-boxplot2" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-boxplot2-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Boxplot básico de R
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-boxplot2" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-boxplot2-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-boxplot2-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-boxplot2-2.png" class="img-fluid figure-img" data-ref-parent="fig-boxplot2" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-boxplot2-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Boxplot utilizando <code>ggplot()</code>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-boxplot2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.5: Ejemplos de boxplot
</figcaption>
</figure>
</div>
<p>Un uso muy interesante del boxplot en R consiste en agrupar los boxplot de una variable en funcion de otra. En este caso, agrupamos el extracto seco por meses previa agrupación de la fecha. Esta agrupación puede hacerse tanto en los gráficos básicos de R como en <code>ggplot()</code>:</p>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explicación del código R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Crear una nueva columna <code>mes</code> a partir de <code>fecha</code></strong>:</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>df_camembert<span class="sc">$</span>mes <span class="ot">&lt;-</span> <span class="fu">format</span>(df_camembert<span class="sc">$</span>fecha, <span class="st">"%m"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>df_camembert$mes &lt;- format(df_camembert$fecha, "%m")</code></strong>: Crea una nueva columna <code>mes</code> en el dataframe <code>df_camembert</code>. La función <code>format</code> se utiliza para convertir las fechas en la columna <code>fecha</code> al formato de mes (<code>%m</code>), extrayendo solo el mes de cada fecha.</li>
</ul></li>
<li><p><strong>Crear un boxplot básico de <code>est</code> por mes</strong>:</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(df_camembert<span class="sc">$</span>est <span class="sc">~</span> df_camembert<span class="sc">$</span>mes)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>boxplot(df_camembert$est ~ df_camembert$mes)</code></strong>: Crea un diagrama de caja y bigotes (boxplot) básico que muestra la distribución de la variable <code>est</code> para cada mes, donde <code>df_camembert$est</code> se grafica en el eje Y y <code>df_camembert$mes</code> en el eje X.</li>
</ul></li>
<li><p><strong>Utilizar <code>ggplot2</code> para crear un boxplot más personalizado</strong>:</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mes =</span> <span class="fu">format</span>(fecha, <span class="st">"%m"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mes, <span class="at">y =</span> est)) <span class="sc">+</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot de 'est' por Meses"</span>,</span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Mes"</span>,</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Valor de est"</span>) <span class="sc">+</span></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>df_camembert |&gt;</code></strong>: Utiliza el operador pipe (<code>|&gt;</code>) para encadenar operaciones sobre el dataframe <code>df_camembert</code>.</li>
</ul></li>
<li><p><strong>Crear y mutar la columna <code>mes</code> dentro del pipeline</strong>:</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mutate</span>(<span class="at">mes =</span> <span class="fu">format</span>(fecha, <span class="st">"%m"</span>)) <span class="sc">|&gt;</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>mutate(mes = format(fecha, "%m"))</code></strong>: Añade una nueva columna <code>mes</code> al dataframe utilizando la función <code>format</code> para extraer el mes de la columna <code>fecha</code>.</li>
</ul></li>
<li><p><strong>Iniciar <code>ggplot</code> con las estéticas (aes)</strong>:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mes, <span class="at">y =</span> est)) <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>ggplot(aes(x = mes, y = est))</code></strong>: Inicia un objeto <code>ggplot</code> y define las estéticas (aes). La variable <code>mes</code> se mapea al eje X y la variable <code>est</code> al eje Y.</li>
</ul></li>
<li><p><strong>Agregar la capa del boxplot</strong>:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_boxplot</span>() <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>geom_boxplot()</code></strong>: Añade una capa de boxplot al gráfico, mostrando la distribución de la variable <code>est</code> para cada mes.</li>
</ul></li>
<li><p><strong>Agregar etiquetas y título</strong>:</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot de 'est' por Meses"</span>,</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">x =</span> <span class="st">"Mes"</span>,</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">y =</span> <span class="st">"Valor de est"</span>) <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>labs(title = "Boxplot de 'est' por Meses", x = "Mes", y = "Valor de est")</code></strong>: Añade etiquetas y título al gráfico.
<ul>
<li><strong><code>title = "Boxplot de 'est' por Meses"</code></strong>: Establece el título del gráfico.</li>
<li><strong><code>x = "Mes"</code></strong>: Etiqueta el eje X.</li>
<li><strong><code>y = "Valor de est"</code></strong>: Etiqueta el eje Y.</li>
</ul></li>
</ul></li>
<li><p><strong>Aplicar un tema minimalista</strong>:</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>theme_minimal()</code></strong>: Aplica un tema minimalista al gráfico, proporcionando un diseño limpio y simple, sin distracciones innecesarias.</li>
</ul></li>
</ol>
<p><strong>Resumen</strong></p>
<p>El código realiza las siguientes acciones:</p>
<ul>
<li>Añade una columna <code>mes</code> al dataframe <code>df_camembert</code>, que contiene solo el mes extraído de la columna <code>fecha</code>.</li>
<li>Crea un boxplot básico que muestra la distribución de <code>est</code> por mes.</li>
<li>Utiliza <code>ggplot2</code> para crear un boxplot más personalizado de <code>est</code> por mes, con etiquetas y un tema minimalista para un diseño limpio.</li>
</ul>
</div>
</div>
</div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>df_camembert<span class="sc">$</span>mes <span class="ot">&lt;-</span> <span class="fu">format</span>(df_camembert<span class="sc">$</span>fecha, <span class="st">"%m"</span>)</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span> (df_camembert<span class="sc">$</span>est<span class="sc">~</span>df_camembert<span class="sc">$</span>mes)</span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span> (<span class="at">mes =</span> <span class="fu">format</span>(fecha, <span class="st">"%m"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> mes, <span class="at">y =</span> est)) <span class="sc">+</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Boxplot de 'est' por Meses"</span>,</span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"Mes"</span>,</span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Valor de est"</span>) <span class="sc">+</span></span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-boxplot3" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-boxplot3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-boxplot3" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-boxplot3-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-boxplot3-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-boxplot3-1.png" class="img-fluid figure-img" data-ref-parent="fig-boxplot3" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-boxplot3-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Boxplot básico de R
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-boxplot3" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-boxplot3-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-boxplot3-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-boxplot3-2.png" class="img-fluid figure-img" data-ref-parent="fig-boxplot3" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-boxplot3-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Boxplot utilizando <code>ggplot()</code>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-boxplot3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.6: Ejemplos de boxplot
</figcaption>
</figure>
</div>
<p>La agrupación de los <em>boxplots</em> por meses nos pone claramente de manifiesto las diferencias en el extracto seco <code>est</code>que ya habíamos visto con los gráficos de densidad. Estas diferencias son más claras en el mes de julio.</p>
<section id="relación-entre-el-boxplot-y-el-histograma" class="level3">
<h3 class="anchored" data-anchor-id="relación-entre-el-boxplot-y-el-histograma">Relación entre el <em>boxplot</em> y el histograma</h3>
<p>Resulta muy útil comprender visualmente la relación entre el <em>boxplot</em> y el histograma para entender la distribución de los datos. En la gráfica siguiente se representan ambos simultáneamente</p>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explicación del código R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ol type="1">
<li><p><strong>Iniciar el pipeline con <code>df_camembert</code></strong>:</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li>Utiliza el operador pipe (<code>|&gt;</code>) para encadenar operaciones sobre el dataframe <code>df_camembert</code>.</li>
</ul></li>
<li><p><strong>Iniciar <code>ggplot</code> con las estéticas (aes)</strong>:</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est)) <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>ggplot(aes(x = est))</code></strong>: Inicia un objeto <code>ggplot</code> y define las estéticas (aes). La variable <code>est</code> se mapea al eje X.</li>
</ul></li>
<li><p><strong>Agregar la capa del histograma</strong>:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">bins =</span> <span class="dv">20</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>geom_histogram(fill = "lightblue", color = "black", bins = 20, alpha = 0.7)</code></strong>: Añade una capa de histograma al gráfico.
<ul>
<li><strong><code>fill = "lightblue"</code></strong>: Colorea las barras del histograma de azul claro.</li>
<li><strong><code>color = "black"</code></strong>: Colorea los bordes de las barras en negro.</li>
<li><strong><code>bins = 20</code></strong>: Especifica el número de barras (bins) en el histograma.</li>
<li><strong><code>alpha = 0.7</code></strong>: Establece la transparencia de las barras (valor entre 0 y 1, donde 0 es completamente transparente y 1 es opaco).</li>
</ul></li>
</ul></li>
<li><p><strong>Agregar la capa del boxplot</strong>:</p>
<div class="sourceCode" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="dv">2</span>, <span class="at">fill =</span> <span class="st">"darkgrey"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">position =</span> <span class="fu">position_nudge</span>(<span class="at">y =</span> <span class="sc">-</span><span class="dv">2</span>)) <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>geom_boxplot(width = 2, fill = "darkgrey", alpha = 0.7, position = position_nudge(y = -2))</code></strong>: Añade una capa de boxplot al gráfico.
<ul>
<li><strong><code>width = 2</code></strong>: Especifica el ancho del boxplot.</li>
<li><strong><code>fill = "darkgrey"</code></strong>: Colorea el boxplot de gris oscuro.</li>
<li><strong><code>alpha = 0.7</code></strong>: Establece la transparencia del boxplot (valor entre 0 y 1).</li>
<li><strong><code>position = position_nudge(y = -2)</code></strong>: Ajusta la posición del boxplot, desplazándolo hacia abajo en el eje Y para que no se superponga con el histograma.</li>
</ul></li>
</ul></li>
<li><p><strong>Agregar etiquetas y título</strong>:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histograma y Boxplot"</span>, <span class="at">y =</span> <span class="st">"Frecuencias"</span>) <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>labs(title = "Histograma y Boxplot", y = "Frecuencias")</code></strong>: Añade etiquetas y título al gráfico.
<ul>
<li><strong><code>title = "Histograma y Boxplot"</code></strong>: Establece el título del gráfico.</li>
<li><strong><code>y = "Frecuencias"</code></strong>: Etiqueta el eje Y como “Frecuencias”.</li>
</ul></li>
</ul></li>
</ol>
<p><strong>Resumen Completo</strong></p>
<p>El código realiza las siguientes acciones:</p>
<ul>
<li>Inicia el pipeline con el dataframe <code>df_camembert</code>.</li>
<li>Define la estética (aes) para mapear la variable <code>est</code> al eje X.</li>
<li>Añade un histograma con barras azules claras, bordes negros, 20 bins y una transparencia del 70%.</li>
<li>Añade un boxplot con ancho de 2, relleno gris oscuro, transparencia del 70% y lo desplaza hacia abajo en el eje Y para evitar superposición con el histograma.</li>
<li>Añade un título y etiqueta el eje Y como “Frecuencias”.</li>
</ul>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est)) <span class="sc">+</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">bins =</span> <span class="dv">20</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="dv">2</span>, <span class="at">fill =</span> <span class="st">"darkgrey"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">position =</span> <span class="fu">position_nudge</span>(<span class="at">y =</span> <span class="sc">-</span><span class="dv">2</span>)) <span class="sc">+</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histograma y Boxplot"</span>, <span class="at">y =</span> <span class="st">"Frecuencias"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="040-exploracion_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">log10</span>(coliformes<span class="sc">+</span><span class="dv">1</span>))) <span class="sc">+</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">"lightblue"</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">bins =</span> <span class="dv">20</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>) <span class="sc">+</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="dv">4</span>, <span class="at">fill =</span> <span class="st">"darkgrey"</span>, <span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">position =</span> <span class="fu">position_nudge</span>(<span class="at">y =</span> <span class="sc">-</span><span class="dv">4</span>)) <span class="sc">+</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Histograma y Boxplot"</span>, <span class="at">y =</span> <span class="st">"Frecuencias"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="040-exploracion_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="gráficos-de-dispersión" class="level2" data-number="4.8">
<h2 data-number="4.8" class="anchored" data-anchor-id="gráficos-de-dispersión"><span class="header-section-number">4.8</span> Gráficos de dispersión</h2>
<p>Un gráfico de dispersión, también conocido como diagrama de dispersión o <em>scatter plot</em>, es una representación gráfica que utiliza puntos para mostrar la relación entre dos variables numéricas. Cada punto en el gráfico representa una observación del conjunto de datos y se coloca en el plano cartesiano de acuerdo con sus valores en las dos variables que se están comparando.</p>
<p>Un gráfico de dispersión se compone mediante puntos:</p>
<ul>
<li>Cada punto en el gráfico representa una observación.</li>
<li>La posición del punto en el gráfico está determinada por los valores de las dos variables para esa observación.</li>
</ul>
<p>Los gráficos de dispersión son útiles para identificar varios aspectos de la relación entre las dos variables:</p>
<ul>
<li>Si los puntos tienden a agruparse a lo largo de una línea recta ascendente, esto indica una correlación positiva (a medida que una variable aumenta, la otra también lo hace).</li>
<li>Si los puntos se agrupan a lo largo de una línea descendente, esto indica una correlación negativa (a medida que una variable aumenta, la otra disminuye).</li>
<li>Si los puntos forman una curva en lugar de una línea recta, esto sugiere una relación no lineal entre las variables.</li>
<li>La dispersión de los puntos puede indicar la variabilidad de los datos. Puntos que están muy lejos del patrón general pueden ser valores atípicos.</li>
</ul>
<p>Como siempre, vemos el gráfico de dispersión en Excel y a continuación en R. Utilizamos la tabla de datos <code>camembert.csv</code> y representamos las variables <code>est</code>y <code>mg</code>.</p>
<div id="fig-grafdisp" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-grafdisp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-grafdisp" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-tabladisp" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-tabladisp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="01-imagenes/camembert-tabla-dispersion-est-mg.png" class="img-fluid figure-img" data-ref-parent="fig-grafdisp">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-tabladisp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Tabla de origen mostrando una parte de los datos seleccionados
</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-grafdisp" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-grafdisp" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-grafdisp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="01-imagenes/camembert-dispersion-est-mg.png" class="img-fluid figure-img" data-ref-parent="fig-grafdisp">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-grafdisp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Gráfico de dispersión
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-grafdisp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.7: Gráfico de dispersión en Excel
</figcaption>
</figure>
</div>
<p>A continuación, el código R para realizar el gráfico de dispersión, con la función básica y con <code>ggplot()</code>.</p>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-16-contents" aria-controls="callout-16" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explicación del código R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-16" class="callout-16-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Primer Fragmento de Código:</strong> <code>plot</code></p>
<ol type="1">
<li><p><strong>Crear un gráfico de dispersión básico</strong>:</p>
<div class="sourceCode" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df_camembert<span class="sc">$</span>est, df_camembert<span class="sc">$</span>mg)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>plot(df_camembert$est, df_camembert$mg)</code></strong>: Crea un gráfico de dispersión usando la función base <code>plot</code>.
<ul>
<li><strong><code>df_camembert$est</code></strong>: Mapea la variable <code>est</code> al eje X.</li>
<li><strong><code>df_camembert$mg</code></strong>: Mapea la variable <code>mg</code> al eje Y.</li>
</ul></li>
</ul></li>
</ol>
<p>Este código genera un gráfico de dispersión que muestra la relación entre <code>est</code> y <code>mg</code>.</p>
<p><strong>Segundo Fragmento de Código:</strong> <code>ggplot2</code></p>
<ol start="2" type="1">
<li><p><strong>Utilizar <code>ggplot2</code> para crear un gráfico de dispersión más personalizable</strong>:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est, <span class="at">y =</span> mg)) <span class="sc">+</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>df_camembert |&gt;</code></strong>: Utiliza el operador pipe (<code>|&gt;</code>) para encadenar operaciones sobre el dataframe <code>df_camembert</code>.</li>
</ul></li>
<li><p><strong>Iniciar <code>ggplot</code> con las estéticas (aes)</strong>:</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est, <span class="at">y =</span> mg)) <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>ggplot(aes(x = est, y = mg))</code></strong>: Inicia un objeto <code>ggplot</code> y define las estéticas (aes). La variable <code>est</code> se mapea al eje X y la variable <code>mg</code> al eje Y.</li>
</ul></li>
<li><p><strong>Agregar la capa de puntos</strong>:</p>
<div class="sourceCode" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>() <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>geom_point()</code></strong>: Añade una capa de puntos al gráfico, mostrando cada observación en <code>est</code> y <code>mg</code>.</li>
</ul></li>
<li><p><strong>Aplicar un tema en blanco y negro</strong>:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_bw</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>theme_bw()</code></strong>: Aplica un tema en blanco y negro al gráfico, proporcionando un diseño limpio y clásico.</li>
</ul></li>
</ol>
<p><strong>Resumen Completo</strong></p>
<ul>
<li><p><strong>Primer Fragmento</strong>:</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df_camembert<span class="sc">$</span>est, df_camembert<span class="sc">$</span>mg)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Este código crea un gráfico de dispersión básico utilizando la función <code>plot</code> de base R, mapeando <code>est</code> al eje X y <code>mg</code> al eje Y.</p></li>
<li><p><strong>Segundo Fragmento</strong>:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est, <span class="at">y =</span> mg)) <span class="sc">+</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Este conjunto de instrucciones utiliza <code>ggplot2</code> para crear un gráfico de dispersión más personalizable, mapeando <code>est</code> al eje X y <code>mg</code> al eje Y, añadiendo una capa de puntos y aplicando un tema en blanco y negro para un diseño limpio y claro.</p></li>
</ul>
</div>
</div>
</div>
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df_camembert<span class="sc">$</span>est, df_camembert<span class="sc">$</span>mg)</span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>est,<span class="at">y=</span>mg))<span class="sc">+</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-grafdisp" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-grafdisp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-grafdisp" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-grafdisp-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-grafdisp-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-grafdisp-1.png" class="img-fluid figure-img" data-ref-parent="fig-grafdisp" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-grafdisp-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Gráfico de dispersion básico de R
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-grafdisp" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-grafdisp-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-grafdisp-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-grafdisp-2.png" class="img-fluid figure-img" data-ref-parent="fig-grafdisp" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-grafdisp-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Gráfico de dispersion utilizando <code>ggplot()</code>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-grafdisp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.8: Ejemplos de gráfico de dispersión
</figcaption>
</figure>
</div>
<p>Lo esperable en nuestros datos es que el valor de <code>est</code> y el de <code>mg</code> estén asociados, y a valores altos de la primera variable correspondan valores altos de la segunda (para el mismo producto y sin cambios de tecnología). Sin embargo, algunos valores parecen no encajar en este modelo; es el caso de un valor de <code>est</code>por encima de 52% con un valor de <code>mg</code>inferior a 23%, o el caso de un valor de <code>mg</code> en torno al 28% con un valor de <code>est</code> por debajo de 47%. Debemos revisar estos valores aparentemente anormales para verificar si ha habido un error en la toma de muestras o un error analítico. En fábricas con productos diferentes cuyos resultados analíticos se recogen en una tabla de datos común, a veces puede haber errores en la introducción de los códigos de producto, de forma que la toma de muestras y los análisis pueden ser correctos, pero estar mal asignados al guardar los datos.</p>
<p>Como vemos, los gráficos de dispersión son una herramienta esencial en el análisis de datos exploratorio, ya que permiten visualizar relaciones y patrones en los datos, identificar correlaciones y detectar posibles anomalías. Esta información es crucial para realizar análisis estadísticos más profundos y tomar decisiones basadas en datos.</p>
</section>
<section id="gráficos-de-series-temporales" class="level2" data-number="4.9">
<h2 data-number="4.9" class="anchored" data-anchor-id="gráficos-de-series-temporales"><span class="header-section-number">4.9</span> Gráficos de series temporales</h2>
<p>Hasta ahora hemos utilizado gráficos y tablas que describen la estructura y forma de una variable, o las relaciones entre dos variables. Hay otros gráficos que tienen en cuenta la forma en la que esos datos cambian con el tiempo. En este caso, será necesario que hayamos recogido en una variable de nuestra tabla los intervalos de tiempo en los que se han producido nuestros valores.</p>
<div class="content-visible callout callout-style-default callout-note no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Ejemplos de series temporales
</div>
</div>
<div class="callout-body-container callout-body">
<p>¿Se te ocurren algunos ejemplos de series temporales?</p>
</div>
</div>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Algunos ejemplos
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><p>proceso de llenado de envases de queso crema: se llena una tarrina cada 15 segundos. Nuestros datos deben recoger el tiempo y el peso.</p></li>
<li><p>nuestro fichero de fabricación de queso camembert recoge los valores analíticos medios diarios del producto fabricado.</p></li>
<li><p>Una fábrica recoge leche diariamente y analiza cada día la composición de la leche que entra en la fábrica.</p></li>
</ul>
</div>
</div>
</div>
<p>En un gráfico de series temporales,</p>
<ul>
<li>el eje horizontal (X) representa el tiempo. Los puntos de tiempo pueden ser minutos, horas, días, meses, años, etc.</li>
<li>el eje vertical (Y) representa los valores de la variable que se está estudiando. Estos valores pueden ser medidas como temperatura, ventas, precios, etc.</li>
<li>cada valor individual corresponde a un punto</li>
<li>los valores se conectan mediante una línea que conecta los puntos de datos, mostrando cómo cambian los valores de la variable a lo largo del tiempo.</li>
<li>normalmente, en un gráfico de series temporales no suelen representarse los puntos individuales para facilitar la legibilidad del gráfico.</li>
</ul>
<p>En nuestro conjunto de datos de fabricación de queso camembert, la primera columna de la tabla recoge la variable <code>fecha</code>, lo que nos permite ordenar nuestros valores en el tiempo.</p>
<p>Cuando representamos valores en el tiempo, nunca usaremos el diagrama de barras, sino el gráfico de líneas.</p>
<section id="cómo-hacer-los-gráficos-de-series-temporales-en-excel-y-en-r" class="level3">
<h3 class="anchored" data-anchor-id="cómo-hacer-los-gráficos-de-series-temporales-en-excel-y-en-r">Cómo hacer los gráficos de series temporales en Excel y en R</h3>
<p>Para hacer el gráfico en Excel, seleccionamos la columna <code>est</code>e insertamos un gráfico de líneas. A continuación, con el cursor sobre el gráfico, pulsamos el boton derecho y seleccionamos la opción <code>Seleccionar datos</code>. Una vez abierto el cuadro de opciones, editamos las etiquetas del eje X y seleccionamos el rango de la variable <code>fecha</code> desde la fila 2 hasta la última.Aceptamos, y a continuación editamos el formato del eje Y para sustituir el valor mínimo de <span class="math inline">\(0\)</span> por <span class="math inline">\(42\)</span>, que es el valor que queremos como mínimo para nuestro gráfico.</p>
<div id="fig-tabladisp" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-tabladisp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="01-imagenes/camembert-excel-graf-series.png" class="img-fluid figure-img">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-tabladisp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.9: Tabla y gráfico de series
</figcaption>
</figure>
</div>
<p>A continuación, los gráficos en R, como siempre con la opción de gráficos base y con <code>ggplot()</code>. R formatea automáticamente el rango del eje Y y no tenemos que hacer ninguna corrección de formato.</p>
<div class="content-visible callout callout-style-default callout-tip no-icon callout-titled" data-when-format="html">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-19-contents" aria-controls="callout-19" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Explicación del código R
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-19" class="callout-19-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><strong>Primer Fragmento de Código:</strong> <code>plot</code></p>
<ol type="1">
<li><p><strong>Crear un gráfico de líneas básico</strong>:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df_camembert<span class="sc">$</span>fecha, df_camembert<span class="sc">$</span>est, <span class="at">type =</span> <span class="st">"l"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>plot(df_camembert$fecha, df_camembert$est, type = "l")</code></strong>: Crea un gráfico de líneas usando la función base <code>plot</code>.
<ul>
<li><strong><code>df_camembert$fecha</code></strong>: Mapea la variable <code>fecha</code> al eje X.</li>
<li><strong><code>df_camembert$est</code></strong>: Mapea la variable <code>est</code> al eje Y.</li>
<li><strong><code>type = "l"</code></strong>: Especifica que el gráfico debe ser de líneas. La <code>"l"</code> indica que las observaciones deben conectarse con líneas.</li>
</ul></li>
</ul></li>
</ol>
<p><strong>Segundo Fragmento de Código:</strong> <code>ggplot2</code></p>
<ol start="2" type="1">
<li><p><strong>Utilizar <code>ggplot2</code> para crear un gráfico de líneas</strong>:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> fecha, <span class="at">y =</span> est)) <span class="sc">+</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>df_camembert |&gt;</code></strong>: Utiliza el operador pipe (<code>|&gt;</code>) para encadenar operaciones sobre el dataframe <code>df_camembert</code>.</li>
</ul></li>
<li><p><strong>Iniciar <code>ggplot</code> con las estéticas (aes)</strong>:</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> fecha, <span class="at">y =</span> est)) <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>ggplot(aes(x = fecha, y = est))</code></strong>: Inicia un objeto <code>ggplot</code> y define las estéticas (aes). La variable <code>fecha</code> se mapea al eje X y la variable <code>est</code> al eje Y.</li>
</ul></li>
<li><p><strong>Agregar la capa de línea</strong>:</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_line</span>() <span class="sc">+</span></span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>geom_line()</code></strong>: Añade una capa de líneas al gráfico, conectando los puntos de datos en <code>fecha</code> y <code>est</code>.</li>
</ul></li>
<li><p><strong>Aplicar un tema en blanco y negro</strong>:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_bw</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ul>
<li><strong><code>theme_bw()</code></strong>: Aplica un tema en blanco y negro al gráfico, proporcionando un diseño limpio y clásico.</li>
</ul></li>
</ol>
<p><strong>Resumen Completo</strong></p>
<ul>
<li><p><strong>Primer Fragmento</strong>:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df_camembert<span class="sc">$</span>fecha, df_camembert<span class="sc">$</span>est, <span class="at">type =</span> <span class="st">"l"</span>)</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Este código crea un gráfico de líneas básico utilizando la función <code>plot</code> de base R, mapeando <code>fecha</code> al eje X y <code>est</code> al eje Y.</p></li>
<li><p><strong>Segundo Fragmento</strong>:</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> fecha, <span class="at">y =</span> est)) <span class="sc">+</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Este conjunto de instrucciones utiliza <code>ggplot2</code> para crear un gráfico de líneas más personalizable, mapeando <code>fecha</code> al eje X y <code>est</code> al eje Y, añadiendo una capa de líneas y aplicando un tema en blanco y negro para un diseño limpio y claro.</p></li>
</ul>
</div>
</div>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df_camembert<span class="sc">$</span>fecha, df_camembert<span class="sc">$</span>est, <span class="at">type=</span><span class="st">"l"</span>)</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>df_camembert <span class="sc">|&gt;</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>fecha, <span class="at">y=</span>est))<span class="sc">+</span></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copiar al portapapeles" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div id="fig-graftemp" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-graftemp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-graftemp" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-graftemp-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-graftemp-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-graftemp-1.png" class="img-fluid figure-img" data-ref-parent="fig-graftemp" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-graftemp-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Gráfico de series temporales básico de R
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-graftemp" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-graftemp-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-graftemp-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="040-exploracion_files/figure-html/fig-graftemp-2.png" class="img-fluid figure-img" data-ref-parent="fig-graftemp" width="672">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-graftemp-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Gráfico de series temporales utilizando <code>ggplot()</code>
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-graftemp-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figura&nbsp;4.10: Ejemplos de gráfico de series temporales
</figcaption>
</figure>
</div>
</section>
<section id="resumen-1" class="level3">
<h3 class="anchored" data-anchor-id="resumen-1">Resumen</h3>
<p>Los gráficos de series temporales son útiles para:</p>
<ol type="1">
<li><strong>Identificar Tendencias</strong>:
<ul>
<li>Una tendencia es una dirección general en la que los datos se mueven a lo largo del tiempo. Puede ser creciente, decreciente o constante.</li>
</ul></li>
<li><strong>Detección de Estacionalidad</strong>:
<ul>
<li>La estacionalidad se refiere a patrones que se repiten en intervalos regulares de tiempo, como las ventas de productos estacionales.</li>
</ul></li>
<li><strong>Identificar Ciclos</strong>:
<ul>
<li>Los ciclos son fluctuaciones que ocurren en intervalos no regulares y pueden deberse a factores económicos o de otra índole.</li>
</ul></li>
<li><strong>Detección de Anomalías</strong>:
<ul>
<li>Los picos y caídas repentinas pueden indicar eventos inusuales o errores en los datos.</li>
</ul></li>
</ol>
<p>Los gráficos de series temporales son cruciales en diversas áreas:</p>
<ol type="1">
<li><strong>Economía y Finanzas</strong>:
<ul>
<li>Seguimiento de precios de acciones, tasas de interés y otros indicadores económicos.</li>
</ul></li>
<li><strong>Ciencia y Tecnología</strong>:
<ul>
<li>Monitoreo de variables ambientales, datos meteorológicos y medidas científicas.</li>
</ul></li>
<li><strong>Negocios</strong>:
<ul>
<li>Análisis de ventas, demanda de productos y desempeño empresarial a lo largo del tiempo.</li>
</ul></li>
</ol>
<p>Los gráficos de series temporales proporcionan una visión clara y concisa de cómo cambian los datos a lo largo del tiempo. Esta visualización es fundamental para el análisis predictivo, la toma de decisiones y la identificación de patrones y anomalías en los datos.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./030-organizacion.html" class="pagination-link" aria-label="La organización de los datos y el flujo de trabajo.Los datos ordenados o _arreglados_ (_tidy data_)">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">La organización de los datos y el flujo de trabajo.Los datos ordenados o <em>arreglados</em> (<em>tidy data</em>)</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./050-estad-simple.html" class="pagination-link" aria-label="Medidas centrales y medidas de dispersión: la media y la varianza.">
        <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Medidas centrales y medidas de dispersión: la media y la varianza.</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>